<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tenchi Chen">

<title>STA 9750 – Mini-Project 04 – Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-9d143b0d033435e2918b6fea2ab3c028.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-9d143b0d033435e2918b6fea2ab3c028.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-9d143b0d033435e2918b6fea2ab3c028.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4d33e6a4f0e9129308d1cfd8680bcebd.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-95471b11d5ca1addc278cead08b8f4bc.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-4d33e6a4f0e9129308d1cfd8680bcebd.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Introduction</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#task-1-ces-total-nonfarm-payroll-levels" id="toc-task-1-ces-total-nonfarm-payroll-levels" class="nav-link" data-scroll-target="#task-1-ces-total-nonfarm-payroll-levels">Task 1: CES Total Nonfarm Payroll Levels</a></li>
  <li><a href="#task-2-ces-revisions-tables" id="toc-task-2-ces-revisions-tables" class="nav-link" data-scroll-target="#task-2-ces-revisions-tables">Task 2: CES Revisions Tables</a></li>
  <li><a href="#task-3-data-integration-and-exploration" id="toc-task-3-data-integration-and-exploration" class="nav-link" data-scroll-target="#task-3-data-integration-and-exploration">Task 3: Data Integration and Exploration</a></li>
  <li><a href="#task-4-statistical-inference" id="toc-task-4-statistical-inference" class="nav-link" data-scroll-target="#task-4-statistical-inference">Task 4 Statistical Inference</a></li>
  <li><a href="#task-5-fact-checks-of-claims-about-bls" id="toc-task-5-fact-checks-of-claims-about-bls" class="nav-link" data-scroll-target="#task-5-fact-checks-of-claims-about-bls">Task 5 – Fact Checks of Claims about BLS</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">STA 9750 – Mini-Project 04</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tenchi Chen </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(infer)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this mini–project, I use <code>httr2</code> and <code>rvest</code> to replicate browser requests to the BLS website and acquire two datasets:</p>
<ol type="1">
<li>Seasonally adjusted total nonfarm payroll levels (CES0000000001).</li>
<li>Revisions to the CES nonfarm payroll employment estimates.</li>
</ol>
<p>The code chunks below show the full workflow from HTTP requests to cleaned monthly data frames.</p>
</section>
<section id="task-1-ces-total-nonfarm-payroll-levels" class="level2">
<h2 class="anchored" data-anchor-id="task-1-ces-total-nonfarm-payroll-levels">Task 1: CES Total Nonfarm Payroll Levels</h2>
<p>In this section, I reproduce the browser’s POST request to <code>SurveyOutputServlet</code> using <code>httr2</code>, download the HTML table of seasonally adjusted total nonfarm payroll levels from 1979–2025, and reshape it into a monthly <code>date</code> / <code>level</code> data frame.</p>
<section id="task-1.1-replicate-the-http-request" class="level3">
<h3 class="anchored" data-anchor-id="task-1.1-replicate-the-http-request">Task 1.1: Replicate the HTTP request</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(rvest)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a>ces_req <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://data.bls.gov/pdq/SurveyOutputServlet"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">req_method</span>(<span class="st">"POST"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">req_headers</span>(</span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="st">"User-Agent"</span> <span class="ot">=</span> <span class="st">"chentenchi@gmail.com STA9750 mini-project (R)"</span>,</span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="st">"Referer"</span>    <span class="ot">=</span> <span class="st">"https://data.bls.gov/pdq/SurveyOutputServlet"</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="fu">req_body_form</span>(</span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="at">request_action    =</span> <span class="st">"get_data"</span>,</span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="at">reformat          =</span> <span class="st">"true"</span>,</span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="at">from_results_page =</span> <span class="st">"true"</span>,</span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="at">from_year         =</span> <span class="st">"1979"</span>,</span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="at">to_year           =</span> <span class="st">"2025"</span>,</span>
<span id="cb2-16"><a href="#cb2-16"></a>    <span class="at">Go.x              =</span> <span class="st">"9"</span>,</span>
<span id="cb2-17"><a href="#cb2-17"></a>    <span class="at">Go.y              =</span> <span class="st">"4"</span>,</span>
<span id="cb2-18"><a href="#cb2-18"></a>    <span class="at">initial_request   =</span> <span class="st">"false"</span>,</span>
<span id="cb2-19"><a href="#cb2-19"></a>    <span class="at">data_tool         =</span> <span class="st">"surveymost"</span>,</span>
<span id="cb2-20"><a href="#cb2-20"></a>    <span class="at">series_id         =</span> <span class="st">"CES0000000001"</span>,</span>
<span id="cb2-21"><a href="#cb2-21"></a>    <span class="at">years_option      =</span> <span class="st">"specific_years"</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>  )</span>
<span id="cb2-23"><a href="#cb2-23"></a></span>
<span id="cb2-24"><a href="#cb2-24"></a>ces_resp <span class="ot">&lt;-</span> ces_req <span class="sc">|&gt;</span></span>
<span id="cb2-25"><a href="#cb2-25"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a>ces_resp  <span class="co"># check for Status: 200</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;httr2_response&gt;
POST https://data.bls.gov/pdq/SurveyOutputServlet
Status: 200 OK
Content-Type: text/html
Body: In memory (68205 bytes)</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>ces_html <span class="ot">&lt;-</span> ces_resp <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">resp_body_html</span>()</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a>ces_table <span class="ot">&lt;-</span> ces_html <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">html_element</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-7"><a href="#cb4-7"></a></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="fu">head</span>(ces_table)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  X1                  X2                                                        
  &lt;chr&gt;               &lt;chr&gt;                                                     
1 Series Id:          CES0000000001                                             
2 Seasonally Adjusted Seasonally Adjusted                                       
3 Series Title:       All employees, thousands, total nonfarm, seasonally adjus…
4 Super Sector:       Total nonfarm                                             
5 Industry:           Total nonfarm                                             
6 NAICS Code:         -                                                         </code></pre>
</div>
</div>
</section>
<section id="task-1.2-extract-and-clean-the-ces-table" class="level3">
<h3 class="anchored" data-anchor-id="task-1.2-extract-and-clean-the-ces-table">Task 1.2: Extract and clean the CES table</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>ces_table <span class="ot">&lt;-</span> ces_html <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">html_element</span>(<span class="st">"table.regular-data"</span>) <span class="sc">|&gt;</span> <span class="co"># or just html_element("table") if there’s only one</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">head</span>(ces_table)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
  Year  Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec  
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 1979  88808 89055 89479 89417 89789 90108 90217 90300 90327 90481 90573 90672
2 1980  90800 90883 90994 90849 90420 90101 89840 90099 90213 90490 90747 90943
3 1981  91033 91105 91210 91283 91296 91490 91601 91565 91477 91380 91171 90895
4 1982  90565 90563 90434 90150 90107 89865 89521 89363 89183 88907 88786 88771
5 1983  88990 88917 89090 89364 89644 90021 90437 90129 91247 91520 91875 92230
6 1984  92673 93157 93429 93792 94098 94479 94789 95032 95344 95629 95982 96107</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># reshape CES table to monthly date/level</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>ces_monthly <span class="ot">&lt;-</span> ces_table <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Year), Year <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="at">cols      =</span> Jan<span class="sc">:</span>Dec,</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="at">names_to  =</span> <span class="st">"month"</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="at">values_to =</span> <span class="st">"level"</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="at">level =</span> readr<span class="sc">::</span><span class="fu">parse_number</span>(level),</span>
<span id="cb8-11"><a href="#cb8-11"></a>    <span class="at">date  =</span> lubridate<span class="sc">::</span><span class="fu">my</span>(<span class="fu">paste</span>(month, Year))</span>
<span id="cb8-12"><a href="#cb8-12"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">filter</span>(</span>
<span id="cb8-14"><a href="#cb8-14"></a>    <span class="sc">!</span><span class="fu">is.na</span>(level),</span>
<span id="cb8-15"><a href="#cb8-15"></a>    <span class="sc">!</span><span class="fu">is.na</span>(date),</span>
<span id="cb8-16"><a href="#cb8-16"></a>    date <span class="sc">&lt;=</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(<span class="st">"2025-06-01"</span>)</span>
<span id="cb8-17"><a href="#cb8-17"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="fu">arrange</span>(date) <span class="sc">|&gt;</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="fu">select</span>(date, level)</span>
<span id="cb8-20"><a href="#cb8-20"></a></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="fu">head</span>(ces_monthly)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  date       level
  &lt;date&gt;     &lt;dbl&gt;
1 1979-01-01 88808
2 1979-02-01 89055
3 1979-03-01 89479
4 1979-04-01 89417
5 1979-05-01 89789
6 1979-06-01 90108</code></pre>
</div>
</div>
</section>
</section>
<section id="task-2-ces-revisions-tables" class="level2">
<h2 class="anchored" data-anchor-id="task-2-ces-revisions-tables">Task 2: CES Revisions Tables</h2>
<p>Here I access the static CES revisions page using <code>httr2</code>, extract the year-specific revision tables with <code>rvest</code>, and build a function that returns the monthly revisions for any year. I then apply this function from 1979–2025 and construct a data frame with:</p>
<ul>
<li><code>date</code> (first day of the month),</li>
<li><code>original</code> (first estimate),</li>
<li><code>final</code> (third estimate),</li>
<li><code>revision = final - original</code>.</li>
</ul>
<section id="task-2.1-download-revisions-page" class="level3">
<h3 class="anchored" data-anchor-id="task-2.1-download-revisions-page">Task 2.1: Download revisions page</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu">library</span>(rvest)</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="fu">library</span>(readr)</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co"># ---- Task 2: download CES revisions page ----</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>rev_req <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.bls.gov/web/empsit/cesnaicsrev.htm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>  <span class="fu">req_method</span>(<span class="st">"GET"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>  <span class="fu">req_headers</span>(</span>
<span id="cb10-12"><a href="#cb10-12"></a>    <span class="st">"User-Agent"</span> <span class="ot">=</span> <span class="st">"chentenchig@gmail.com STA9750 mini-project (R)"</span>,</span>
<span id="cb10-13"><a href="#cb10-13"></a>    <span class="st">"Referer"</span>    <span class="ot">=</span> <span class="st">"https://www.bls.gov/web/empsit/cesnaicsrev.htm"</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>  )</span>
<span id="cb10-15"><a href="#cb10-15"></a></span>
<span id="cb10-16"><a href="#cb10-16"></a>rev_resp <span class="ot">&lt;-</span> rev_req <span class="sc">|&gt;</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb10-18"><a href="#cb10-18"></a></span>
<span id="cb10-19"><a href="#cb10-19"></a>rev_resp   <span class="co"># check Status: 200</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;httr2_response&gt;
GET https://www.bls.gov/web/empsit/cesnaicsrev.htm
Status: 200 OK
Content-Type: text/html
Body: In memory (401469 bytes)</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>rev_html <span class="ot">&lt;-</span> rev_resp <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">resp_body_html</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># helper: CSS selector for a year table</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>table_selector_for_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">paste0</span>(<span class="st">"table#"</span>, year)</span>
<span id="cb13-4"><a href="#cb13-4"></a>}</span>
<span id="cb13-5"><a href="#cb13-5"></a></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co"># 2024 </span></span>
<span id="cb13-7"><a href="#cb13-7"></a>rev_2024_raw <span class="ot">&lt;-</span> rev_html <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="fu">html_element</span>(<span class="fu">table_selector_for_year</span>(<span class="dv">2024</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>  <span class="fu">html_table</span>(<span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-10"><a href="#cb13-10"></a></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="fu">head</span>(rev_2024_raw, <span class="dv">15</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 14
   X1    X2    X3    X4    X5    X6    X7    X8    X9    X10   X11   X12   X13  
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 Month Year  Seas… Seas… Seas… Seas… Seas… Seas… Not … Not … Not … Not … Not …
 2 Month Year  Over… Over… Over… Revi… Revi… Revi… Over… Over… Over… Revi… Revi…
 3 Month Year  1st   2nd   3rd   2nd … 3rd … 3rd … 1st   2nd   3rd   2nd … 3rd …
 4 Jan.  2024  353   229   256   -124  27    -97   -2635 -2855 -2837 -220  18   
 5 Feb.  2024  275   270   236   -5    -34   -39   1141  1127  1119  -14   -8   
 6 Mar.  2024  303   315   310   12    -5    7     659   662   659   3     -3   
 7 Apr.  2024  175   165   108   -10   -57   -67   803   791   791   -12   0    
 8 May   2024  272   218   216   -54   -2    -56   917   844   841   -73   -3   
 9 Jun.  2024  206   179   118   -27   -61   -88   547   518   499   -29   -19  
10 Jul.  2024  114   89    144   -25   55    30    -915  -954  -942  -39   12   
11 Aug.  2024  142   159   78    17    -81   -64   263   318   332   55    14   
12 Sep.  2024  254   223   255   -31   32    1     460   450   453   -10   3    
13 Oct.  2024  12    36    43    24    7     31    826   851   846   25    -5   
14 Nov.  2024  227   212   261   -15   49    34    525   509   530   -16   21   
15 Dec.  2024  256   307   323   51    16    67    -81   61    41    142   -20  
# ℹ 1 more variable: X14 &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="task-2.2-extract-yearly-tables-and-build-function" class="level3">
<h3 class="anchored" data-anchor-id="task-2.2-extract-yearly-tables-and-build-function">Task 2.2: Extract yearly tables and build function</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co"># CSS selector for a given year's table: table#2024, table#2023, ...</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>table_selector_for_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="fu">paste0</span>(<span class="st">"table#"</span>, year)</span>
<span id="cb15-6"><a href="#cb15-6"></a>}</span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a>extract_revisions_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb15-9"><a href="#cb15-9"></a>  <span class="co"># raw table for that year</span></span>
<span id="cb15-10"><a href="#cb15-10"></a>  tbl_raw <span class="ot">&lt;-</span> rev_html <span class="sc">|&gt;</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>    <span class="fu">html_element</span>(<span class="fu">table_selector_for_year</span>(year)) <span class="sc">|&gt;</span></span>
<span id="cb15-12"><a href="#cb15-12"></a>    <span class="fu">html_table</span>(<span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-13"><a href="#cb15-13"></a></span>
<span id="cb15-14"><a href="#cb15-14"></a>  <span class="co"># drop the 3 header rows, then keep the first 12 rows (Jan–Dec)</span></span>
<span id="cb15-15"><a href="#cb15-15"></a>  tbl_body <span class="ot">&lt;-</span> tbl_raw <span class="sc">|&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16"></a>    <span class="fu">slice</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb15-17"><a href="#cb15-17"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb15-18"><a href="#cb15-18"></a></span>
<span id="cb15-19"><a href="#cb15-19"></a>  <span class="co"># pick out month, year, original (1st), final (3rd)</span></span>
<span id="cb15-20"><a href="#cb15-20"></a>  tbl_clean <span class="ot">&lt;-</span> tbl_body <span class="sc">|&gt;</span></span>
<span id="cb15-21"><a href="#cb15-21"></a>    <span class="fu">select</span>(</span>
<span id="cb15-22"><a href="#cb15-22"></a>      <span class="at">month    =</span> <span class="dv">1</span>,   <span class="co"># X1</span></span>
<span id="cb15-23"><a href="#cb15-23"></a>      <span class="at">year     =</span> <span class="dv">2</span>,   <span class="co"># X2</span></span>
<span id="cb15-24"><a href="#cb15-24"></a>      <span class="at">original =</span> <span class="dv">3</span>,   <span class="co"># X3 = 1st estimate</span></span>
<span id="cb15-25"><a href="#cb15-25"></a>      <span class="at">final    =</span> <span class="dv">5</span>    <span class="co"># X5 = 3rd estimate</span></span>
<span id="cb15-26"><a href="#cb15-26"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb15-27"><a href="#cb15-27"></a>    <span class="fu">mutate</span>(</span>
<span id="cb15-28"><a href="#cb15-28"></a>      <span class="co"># remove trailing dot from month names (Jan. -&gt; Jan)</span></span>
<span id="cb15-29"><a href="#cb15-29"></a>      <span class="at">month    =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, month),</span>
<span id="cb15-30"><a href="#cb15-30"></a>      <span class="at">original =</span> <span class="fu">parse_number</span>(original),</span>
<span id="cb15-31"><a href="#cb15-31"></a>      <span class="at">final    =</span> <span class="fu">parse_number</span>(final),</span>
<span id="cb15-32"><a href="#cb15-32"></a>      <span class="at">revision =</span> final <span class="sc">-</span> original,</span>
<span id="cb15-33"><a href="#cb15-33"></a>      <span class="co"># "1979 Jan" -&gt; 1979-01-01</span></span>
<span id="cb15-34"><a href="#cb15-34"></a>      <span class="at">date     =</span> <span class="fu">ym</span>(<span class="fu">paste</span>(year, month))</span>
<span id="cb15-35"><a href="#cb15-35"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb15-36"><a href="#cb15-36"></a>    <span class="fu">select</span>(date, original, final, revision)</span>
<span id="cb15-37"><a href="#cb15-37"></a></span>
<span id="cb15-38"><a href="#cb15-38"></a>  tbl_clean</span>
<span id="cb15-39"><a href="#cb15-39"></a>}</span>
<span id="cb15-40"><a href="#cb15-40"></a></span>
<span id="cb15-41"><a href="#cb15-41"></a><span class="co"># test on 2024 like the instructions suggest</span></span>
<span id="cb15-42"><a href="#cb15-42"></a>revisions_2024 <span class="ot">&lt;-</span> <span class="fu">extract_revisions_year</span>(<span class="dv">2024</span>)</span>
<span id="cb15-43"><a href="#cb15-43"></a>revisions_2024</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   date       original final revision
   &lt;date&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
 1 2024-01-01      353   256      -97
 2 2024-02-01      275   236      -39
 3 2024-03-01      303   310        7
 4 2024-04-01      175   108      -67
 5 2024-05-01      272   216      -56
 6 2024-06-01      206   118      -88
 7 2024-07-01      114   144       30
 8 2024-08-01      142    78      -64
 9 2024-09-01      254   255        1
10 2024-10-01       12    43       31
11 2024-11-01      227   261       34
12 2024-12-01      256   323       67</code></pre>
</div>
</div>
</section>
<section id="task-2.3-combine-years-into-a-single-data-frame" class="level3">
<h3 class="anchored" data-anchor-id="task-2.3-combine-years-into-a-single-data-frame">Task 2.3: Combine years into a single data frame</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>years <span class="ot">&lt;-</span> <span class="dv">1979</span><span class="sc">:</span><span class="dv">2025</span></span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>ces_revisions <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(years, extract_revisions_year)</span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># keep only through June 2025 as the instructions say</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>ces_revisions <span class="ot">&lt;-</span> ces_revisions <span class="sc">|&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>  <span class="fu">filter</span>(date <span class="sc">&lt;=</span> <span class="fu">ymd</span>(<span class="st">"2025-06-01"</span>),</span>
<span id="cb17-8"><a href="#cb17-8"></a>         <span class="sc">!</span><span class="fu">is.na</span>(original),</span>
<span id="cb17-9"><a href="#cb17-9"></a>         <span class="sc">!</span><span class="fu">is.na</span>(final))</span>
<span id="cb17-10"><a href="#cb17-10"></a></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="fu">head</span>(ces_revisions)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  date       original final revision
  &lt;date&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 1979-01-01      325   243      -82
2 1979-02-01      301   294       -7
3 1979-03-01      324   445      121
4 1979-04-01       72   -15      -87
5 1979-05-01      171   291      120
6 1979-06-01       97   225      128</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">tail</span>(ces_revisions)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  date       original final revision
  &lt;date&gt;        &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1 2025-01-01      143   111      -32
2 2025-02-01      151   102      -49
3 2025-03-01      228   120     -108
4 2025-04-01      177   158      -19
5 2025-05-01      139    19     -120
6 2025-06-01      147   -13     -160</code></pre>
</div>
</div>
</section>
</section>
<section id="task-3-data-integration-and-exploration" class="level2">
<h2 class="anchored" data-anchor-id="task-3-data-integration-and-exploration">Task 3: Data Integration and Exploration</h2>
<section id="join-the-tables-create-derived-variables" class="level3">
<h3 class="anchored" data-anchor-id="join-the-tables-create-derived-variables">Join the tables + create derived variables</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="fu">library</span>(infer)</span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co"># Join level and revision data</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>ces_joined <span class="ot">&lt;-</span> ces_monthly <span class="sc">|&gt;</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>  <span class="fu">left_join</span>(ces_revisions, <span class="at">by =</span> <span class="st">"date"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-10"><a href="#cb21-10"></a>    <span class="at">year              =</span> <span class="fu">year</span>(date),</span>
<span id="cb21-11"><a href="#cb21-11"></a>    <span class="at">month_num         =</span> <span class="fu">month</span>(date),</span>
<span id="cb21-12"><a href="#cb21-12"></a>    <span class="at">month_name        =</span> <span class="fu">month</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-13"><a href="#cb21-13"></a>    <span class="at">abs_revision      =</span> <span class="fu">abs</span>(revision),</span>
<span id="cb21-14"><a href="#cb21-14"></a>    <span class="at">rel_revision_pct  =</span> revision <span class="sc">/</span> level <span class="sc">*</span> <span class="dv">100</span>,          <span class="co"># revision as % of level</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>    <span class="at">abs_rel_rev_pct   =</span> <span class="fu">abs</span>(revision) <span class="sc">/</span> level <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb21-16"><a href="#cb21-16"></a>    <span class="at">decade            =</span> <span class="fu">floor</span>(year <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>            <span class="co"># 1970s, 1980s, etc.</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>  )</span>
<span id="cb21-18"><a href="#cb21-18"></a></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="fu">glimpse</span>(ces_joined)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 558
Columns: 12
$ date             &lt;date&gt; 1979-01-01, 1979-02-01, 1979-03-01, 1979-04-01, 1979…
$ level            &lt;dbl&gt; 88808, 89055, 89479, 89417, 89789, 90108, 90217, 9030…
$ original         &lt;dbl&gt; 325, 301, 324, 72, 171, 97, 44, 2, 135, 306, 218, 317…
$ final            &lt;dbl&gt; 243, 294, 445, -15, 291, 225, 87, 49, 41, 179, 118, 1…
$ revision         &lt;dbl&gt; -82, -7, 121, -87, 120, 128, 43, 47, -94, -127, -100,…
$ year             &lt;dbl&gt; 1979, 1979, 1979, 1979, 1979, 1979, 1979, 1979, 1979,…
$ month_num        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5,…
$ month_name       &lt;ord&gt; Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov…
$ abs_revision     &lt;dbl&gt; 82, 7, 121, 87, 120, 128, 43, 47, 94, 127, 100, 176, …
$ rel_revision_pct &lt;dbl&gt; -0.092334024, -0.007860311, 0.135227260, -0.097296935…
$ abs_rel_rev_pct  &lt;dbl&gt; 0.092334024, 0.007860311, 0.135227260, 0.097296935, 0…
$ decade           &lt;dbl&gt; 1970, 1970, 1970, 1970, 1970, 1970, 1970, 1970, 1970,…</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Extra variables for inference</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>ces_inf <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-4"><a href="#cb23-4"></a>    <span class="at">is_negative   =</span> revision <span class="sc">&lt;</span> <span class="dv">0</span>,</span>
<span id="cb23-5"><a href="#cb23-5"></a>    <span class="at">large_gt1pct  =</span> abs_rel_rev_pct <span class="sc">&gt;</span> <span class="dv">1</span>,</span>
<span id="cb23-6"><a href="#cb23-6"></a>    <span class="at">period_2000   =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"pre_2000"</span>, <span class="st">"post_2000"</span>),</span>
<span id="cb23-7"><a href="#cb23-7"></a>    <span class="at">period_2020   =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2020</span>, <span class="st">"pre_2020"</span>, <span class="st">"post_2020"</span>)</span>
<span id="cb23-8"><a href="#cb23-8"></a>  )</span>
<span id="cb23-9"><a href="#cb23-9"></a></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="fu">glimpse</span>(ces_inf)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 558
Columns: 16
$ date             &lt;date&gt; 1979-01-01, 1979-02-01, 1979-03-01, 1979-04-01, 1979…
$ level            &lt;dbl&gt; 88808, 89055, 89479, 89417, 89789, 90108, 90217, 9030…
$ original         &lt;dbl&gt; 325, 301, 324, 72, 171, 97, 44, 2, 135, 306, 218, 317…
$ final            &lt;dbl&gt; 243, 294, 445, -15, 291, 225, 87, 49, 41, 179, 118, 1…
$ revision         &lt;dbl&gt; -82, -7, 121, -87, 120, 128, 43, 47, -94, -127, -100,…
$ year             &lt;dbl&gt; 1979, 1979, 1979, 1979, 1979, 1979, 1979, 1979, 1979,…
$ month_num        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5,…
$ month_name       &lt;ord&gt; Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov…
$ abs_revision     &lt;dbl&gt; 82, 7, 121, 87, 120, 128, 43, 47, 94, 127, 100, 176, …
$ rel_revision_pct &lt;dbl&gt; -0.092334024, -0.007860311, 0.135227260, -0.097296935…
$ abs_rel_rev_pct  &lt;dbl&gt; 0.092334024, 0.007860311, 0.135227260, 0.097296935, 0…
$ decade           &lt;dbl&gt; 1970, 1970, 1970, 1970, 1970, 1970, 1970, 1970, 1970,…
$ is_negative      &lt;lgl&gt; TRUE, TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, …
$ large_gt1pct     &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…
$ period_2000      &lt;chr&gt; "pre_2000", "pre_2000", "pre_2000", "pre_2000", "pre_…
$ period_2020      &lt;chr&gt; "pre_2020", "pre_2020", "pre_2020", "pre_2020", "pre_…</code></pre>
</div>
</div>
</section>
<section id="example-summary-statistics-6-stats" class="level3">
<h3 class="anchored" data-anchor-id="example-summary-statistics-6-stats">Example summary statistics (6+ stats)</h3>
<section id="overall-summaries" class="level4">
<h4 class="anchored" data-anchor-id="overall-summaries">Overall summaries</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>overall_stats <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">summarise</span>(</span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="at">n_months           =</span> <span class="fu">n</span>(),</span>
<span id="cb25-4"><a href="#cb25-4"></a>    <span class="at">first_date         =</span> <span class="fu">min</span>(date),</span>
<span id="cb25-5"><a href="#cb25-5"></a>    <span class="at">last_date          =</span> <span class="fu">max</span>(date),</span>
<span id="cb25-6"><a href="#cb25-6"></a>    <span class="at">mean_level         =</span> <span class="fu">mean</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb25-7"><a href="#cb25-7"></a>    <span class="at">sd_level           =</span> <span class="fu">sd</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb25-8"><a href="#cb25-8"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb25-9"><a href="#cb25-9"></a>    <span class="at">max_up_revision    =</span> <span class="fu">max</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb25-10"><a href="#cb25-10"></a>    <span class="at">max_down_revision  =</span> <span class="fu">min</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb25-11"><a href="#cb25-11"></a>    <span class="at">mean_abs_rel_rev   =</span> <span class="fu">mean</span>(abs_rel_rev_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-12"><a href="#cb25-12"></a>  )</span>
<span id="cb25-13"><a href="#cb25-13"></a></span>
<span id="cb25-14"><a href="#cb25-14"></a>overall_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 9
  n_months first_date last_date  mean_level sd_level mean_abs_revision
     &lt;int&gt; &lt;date&gt;     &lt;date&gt;          &lt;dbl&gt;    &lt;dbl&gt;             &lt;dbl&gt;
1      558 1979-01-01 2025-06-01    124707.   19994.              56.9
# ℹ 3 more variables: max_up_revision &lt;dbl&gt;, max_down_revision &lt;dbl&gt;,
#   mean_abs_rel_rev &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="by-decade" class="level4">
<h4 class="anchored" data-anchor-id="by-decade">By decade</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>decade_stats <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">group_by</span>(decade) <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb27-4"><a href="#cb27-4"></a>    <span class="at">mean_level        =</span> <span class="fu">mean</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="at">mean_abs_revision =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-6"><a href="#cb27-6"></a>    <span class="at">frac_positive_rev =</span> <span class="fu">mean</span>(revision <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-7"><a href="#cb27-7"></a>  )</span>
<span id="cb27-8"><a href="#cb27-8"></a></span>
<span id="cb27-9"><a href="#cb27-9"></a>decade_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  decade mean_level mean_abs_revision frac_positive_rev
   &lt;dbl&gt;      &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
1   1970     89936.              94.3             0.417
2   1980     96890.              72.2             0.492
3   1990    116760.              51.4             0.692
4   2000    133376.              48.6             0.542
5   2010    140423.              35.2             0.625
6   2020    151721.              86.9             0.470</code></pre>
</div>
</div>
</section>
<section id="by-month-of-year-seasonal-pattern-in-revisions" class="level4">
<h4 class="anchored" data-anchor-id="by-month-of-year-seasonal-pattern-in-revisions">By month-of-year (seasonal pattern in revisions)</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>month_stats <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">group_by</span>(month_name) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="fu">summarise</span>(</span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="at">mean_abs_revision =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="at">frac_positive_rev =</span> <span class="fu">mean</span>(revision <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-6"><a href="#cb29-6"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>  <span class="fu">arrange</span>(month_name)</span>
<span id="cb29-8"><a href="#cb29-8"></a></span>
<span id="cb29-9"><a href="#cb29-9"></a>month_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   month_name mean_abs_revision frac_positive_rev
   &lt;ord&gt;                  &lt;dbl&gt;             &lt;dbl&gt;
 1 Jan                     48.2             0.553
 2 Feb                     43.7             0.468
 3 Mar                     65.6             0.553
 4 Apr                     68.9             0.553
 5 May                     55.5             0.617
 6 Jun                     53.5             0.511
 7 Jul                     53.4             0.630
 8 Aug                     53.8             0.652
 9 Sep                     80.2             0.804
10 Oct                     50.7             0.413
11 Nov                     55.1             0.630
12 Dec                     54.3             0.457</code></pre>
</div>
</div>
</section>
</section>
<section id="four-ggplot-visualizations" class="level3">
<h3 class="anchored" data-anchor-id="four-ggplot-visualizations">Four ggplot visualizations</h3>
<section id="plot-1-ces-level-over-time" class="level4">
<h4 class="anchored" data-anchor-id="plot-1-ces-level-over-time">Plot 1 – CES level over time</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">ggplot</span>(ces_joined, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> level)) <span class="sc">+</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="at">title =</span> <span class="st">"Total Nonfarm Payroll Employment (Seasonally Adjusted)"</span>,</span>
<span id="cb31-5"><a href="#cb31-5"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb31-6"><a href="#cb31-6"></a>    <span class="at">y =</span> <span class="st">"Employment Level (thousands)"</span></span>
<span id="cb31-7"><a href="#cb31-7"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-2-revisions-over-time" class="level4">
<h4 class="anchored" data-anchor-id="plot-2-revisions-over-time">Plot 2 – Revisions over time</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">ggplot</span>(ces_joined, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> revision)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>  <span class="fu">labs</span>(</span>
<span id="cb32-5"><a href="#cb32-5"></a>    <span class="at">title =</span> <span class="st">"CES Revisions Over Time (1st vs 3rd Estimate)"</span>,</span>
<span id="cb32-6"><a href="#cb32-6"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb32-7"><a href="#cb32-7"></a>    <span class="at">y =</span> <span class="st">"Revision (final − original, thousands)"</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-3-distribution-of-revisions" class="level4">
<h4 class="anchored" data-anchor-id="plot-3-distribution-of-revisions">Plot 3 – Distribution of revisions</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">ggplot</span>(ces_joined, <span class="fu">aes</span>(<span class="at">x =</span> revision)) <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">boundary =</span> <span class="dv">0</span>, <span class="at">closed =</span> <span class="st">"left"</span>) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-5"><a href="#cb33-5"></a>    <span class="at">title =</span> <span class="st">"Distribution of Monthly CES Revisions"</span>,</span>
<span id="cb33-6"><a href="#cb33-6"></a>    <span class="at">x =</span> <span class="st">"Revision (thousands)"</span>,</span>
<span id="cb33-7"><a href="#cb33-7"></a>    <span class="at">y =</span> <span class="st">"Count of Months"</span></span>
<span id="cb33-8"><a href="#cb33-8"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-4-average-absolute-revision-by-decade" class="level4">
<h4 class="anchored" data-anchor-id="plot-4-average-absolute-revision-by-decade">Plot 4 – Average absolute revision by decade</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">ggplot</span>(decade_stats, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(decade), <span class="at">y =</span> mean_abs_revision)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">labs</span>(</span>
<span id="cb34-4"><a href="#cb34-4"></a>    <span class="at">title =</span> <span class="st">"Average Absolute CES Revision by Decade"</span>,</span>
<span id="cb34-5"><a href="#cb34-5"></a>    <span class="at">x =</span> <span class="st">"Decade"</span>,</span>
<span id="cb34-6"><a href="#cb34-6"></a>    <span class="at">y =</span> <span class="st">"Mean |Revision| (thousands)"</span></span>
<span id="cb34-7"><a href="#cb34-7"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="statistical-analysis-with-infer" class="level3">
<h3 class="anchored" data-anchor-id="statistical-analysis-with-infer">Statistical Analysis with ‘infer’</h3>
<section id="two-sample-t-test-using-t_test" class="level4">
<h4 class="anchored" data-anchor-id="two-sample-t-test-using-t_test">Two-sample t-test (using ‘’t_test’)</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>ces_decades_test <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">1980</span>, year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb35-4"><a href="#cb35-4"></a>    <span class="at">period =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"1980s_1990s"</span>, <span class="st">"2000s_2010s"</span>),</span>
<span id="cb35-5"><a href="#cb35-5"></a>    <span class="at">abs_rev =</span> abs_revision</span>
<span id="cb35-6"><a href="#cb35-6"></a>  )</span>
<span id="cb35-7"><a href="#cb35-7"></a></span>
<span id="cb35-8"><a href="#cb35-8"></a>ces_t_test <span class="ot">&lt;-</span> ces_decades_test <span class="sc">|&gt;</span></span>
<span id="cb35-9"><a href="#cb35-9"></a>  <span class="fu">t_test</span>(abs_rev <span class="sc">~</span> period,</span>
<span id="cb35-10"><a href="#cb35-10"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"1980s_1990s"</span>, <span class="st">"2000s_2010s"</span>))</span>
<span id="cb35-11"><a href="#cb35-11"></a></span>
<span id="cb35-12"><a href="#cb35-12"></a>ces_t_test</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  statistic  t_df   p_value alternative estimate lower_ci upper_ci
      &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1      4.43  382. 0.0000121 two.sided       19.9     11.1     28.7</code></pre>
</div>
</div>
</section>
<section id="proportion-test-using-prop_test" class="level4">
<h4 class="anchored" data-anchor-id="proportion-test-using-prop_test">Proportion test (using ‘prop_test’)</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>ces_prop_data <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">1980</span>, year <span class="sc">&lt;=</span> <span class="dv">2024</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-4"><a href="#cb37-4"></a>    <span class="at">positive =</span> revision <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb37-5"><a href="#cb37-5"></a>    <span class="at">period   =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"pre_2000"</span>, <span class="st">"post_2000"</span>)</span>
<span id="cb37-6"><a href="#cb37-6"></a>  )</span>
<span id="cb37-7"><a href="#cb37-7"></a></span>
<span id="cb37-8"><a href="#cb37-8"></a>ces_prop_test <span class="ot">&lt;-</span> ces_prop_data <span class="sc">|&gt;</span></span>
<span id="cb37-9"><a href="#cb37-9"></a>  <span class="fu">prop_test</span>(positive <span class="sc">~</span> period,</span>
<span id="cb37-10"><a href="#cb37-10"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_2000"</span>, <span class="st">"pre_2000"</span>))</span>
<span id="cb37-11"><a href="#cb37-11"></a></span>
<span id="cb37-12"><a href="#cb37-12"></a>ces_prop_test</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1     0.176        1   0.675 two.sided     -0.109   0.0658</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="task-4-statistical-inference" class="level2">
<h2 class="anchored" data-anchor-id="task-4-statistical-inference">Task 4 Statistical Inference</h2>
<section id="test-1-has-the-fraction-of-negative-revisions-increased-post-2000" class="level3">
<h3 class="anchored" data-anchor-id="test-1-has-the-fraction-of-negative-revisions-increased-post-2000">Test 1 – Has the fraction of negative revisions increased post-2000?</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># Task 4, Test 1: fraction of negative revisions pre- vs post-2000</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>neg_prop_test <span class="ot">&lt;-</span> ces_inf <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(is_negative)) <span class="sc">|&gt;</span></span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="fu">prop_test</span>(is_negative <span class="sc">~</span> period_2000,</span>
<span id="cb39-5"><a href="#cb39-5"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_2000"</span>, <span class="st">"pre_2000"</span>))</span>
<span id="cb39-6"><a href="#cb39-6"></a></span>
<span id="cb39-7"><a href="#cb39-7"></a>neg_prop_test</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1     0.608        1   0.435 two.sided    -0.0495    0.122</code></pre>
</div>
</div>
<p>A two-sample proportion test comparing pre-2000 vs post-2000 negative revisions gave a p-value of 0.435 with a 95% CI for the difference of [-0.05, 0.12]. Since the interval includes 0 and the p-value is large, we fail to reject the null hypothesis. There is no clear evidence that the fraction of negative CES revisions changed after 2000.</p>
</section>
<section id="test-2-has-the-average-revision-changed-post-2020" class="level3">
<h3 class="anchored" data-anchor-id="test-2-has-the-average-revision-changed-post-2020">Test 2 – Has the average revision changed post-2020?</h3>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># Task 4, Test 2: average revision pre- vs post-2020</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>rev_t_test <span class="ot">&lt;-</span> ces_inf <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="#cb41-4"></a>  <span class="fu">t_test</span>(revision <span class="sc">~</span> period_2020,</span>
<span id="cb41-5"><a href="#cb41-5"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_2020"</span>, <span class="st">"pre_2020"</span>))</span>
<span id="cb41-6"><a href="#cb41-6"></a></span>
<span id="cb41-7"><a href="#cb41-7"></a>rev_t_test</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  statistic  t_df p_value alternative estimate lower_ci upper_ci
      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1    -0.702  69.5   0.485 two.sided      -12.5    -48.1     23.0</code></pre>
</div>
</div>
<p>A two-sample t-test comparing mean revisions pre-2020 vs post-2020 yielded an estimated difference of -12.5 thousand jobs (post-2020 minus pre-2020), with a 95% CI of [-48.1, 23.0] and a p-value of 0.485. Again, the interval spans 0 and the p-value is well above 0.05, so we fail to reject the null hypothesis. The data do not provide strong evidence that the average CES revision changed after 2020.</p>
</section>
</section>
<section id="task-5-fact-checks-of-claims-about-bls" class="level2">
<h2 class="anchored" data-anchor-id="task-5-fact-checks-of-claims-about-bls">Task 5 – Fact Checks of Claims about BLS</h2>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># Add president/party labels and periods</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>presidents_party <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">expand_grid</span>(</span>
<span id="cb43-3"><a href="#cb43-3"></a>  <span class="at">year  =</span> <span class="dv">1979</span><span class="sc">:</span><span class="dv">2025</span>,</span>
<span id="cb43-4"><a href="#cb43-4"></a>  <span class="at">month =</span> month.name,</span>
<span id="cb43-5"><a href="#cb43-5"></a>  <span class="at">president =</span> <span class="cn">NA_character_</span>,</span>
<span id="cb43-6"><a href="#cb43-6"></a>  <span class="at">party     =</span> <span class="cn">NA_character_</span></span>
<span id="cb43-7"><a href="#cb43-7"></a>) <span class="sc">|&gt;</span></span>
<span id="cb43-8"><a href="#cb43-8"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-9"><a href="#cb43-9"></a>    <span class="at">president =</span> <span class="fu">case_when</span>(</span>
<span id="cb43-10"><a href="#cb43-10"></a>      (month <span class="sc">==</span> <span class="st">"January"</span>)  <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1979</span>) <span class="sc">~</span> <span class="st">"Carter"</span>,</span>
<span id="cb43-11"><a href="#cb43-11"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1981</span>) <span class="sc">~</span> <span class="st">"Reagan"</span>,</span>
<span id="cb43-12"><a href="#cb43-12"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1989</span>) <span class="sc">~</span> <span class="st">"Bush 41"</span>,</span>
<span id="cb43-13"><a href="#cb43-13"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1993</span>) <span class="sc">~</span> <span class="st">"Clinton"</span>,</span>
<span id="cb43-14"><a href="#cb43-14"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2001</span>) <span class="sc">~</span> <span class="st">"Bush 43"</span>,</span>
<span id="cb43-15"><a href="#cb43-15"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">~</span> <span class="st">"Obama"</span>,</span>
<span id="cb43-16"><a href="#cb43-16"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">~</span> <span class="st">"Trump"</span>,</span>
<span id="cb43-17"><a href="#cb43-17"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">~</span> <span class="st">"Biden"</span>,</span>
<span id="cb43-18"><a href="#cb43-18"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2025</span>) <span class="sc">~</span> <span class="st">"Trump II"</span>,</span>
<span id="cb43-19"><a href="#cb43-19"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb43-20"><a href="#cb43-20"></a>    )</span>
<span id="cb43-21"><a href="#cb43-21"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-22"><a href="#cb43-22"></a>  tidyr<span class="sc">::</span><span class="fu">fill</span>(president) <span class="sc">|&gt;</span></span>
<span id="cb43-23"><a href="#cb43-23"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-24"><a href="#cb43-24"></a>    <span class="at">party =</span> <span class="fu">if_else</span>(president <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Carter"</span>, <span class="st">"Clinton"</span>, <span class="st">"Obama"</span>, <span class="st">"Biden"</span>),</span>
<span id="cb43-25"><a href="#cb43-25"></a>                    <span class="st">"D"</span>, <span class="st">"R"</span>)</span>
<span id="cb43-26"><a href="#cb43-26"></a>  )</span>
<span id="cb43-27"><a href="#cb43-27"></a></span>
<span id="cb43-28"><a href="#cb43-28"></a>ces_pres <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb43-29"><a href="#cb43-29"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-30"><a href="#cb43-30"></a>    <span class="at">month_full      =</span> <span class="fu">month</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb43-31"><a href="#cb43-31"></a>    <span class="at">period_election =</span> <span class="fu">if_else</span>(date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-11-01"</span>),</span>
<span id="cb43-32"><a href="#cb43-32"></a>                              <span class="st">"post_election"</span>, <span class="st">"pre_election"</span>),</span>
<span id="cb43-33"><a href="#cb43-33"></a>    <span class="at">period_2020     =</span> <span class="fu">if_else</span>(year <span class="sc">&gt;=</span> <span class="dv">2020</span>, <span class="st">"post_2020"</span>, <span class="st">"pre_2020"</span>)</span>
<span id="cb43-34"><a href="#cb43-34"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-35"><a href="#cb43-35"></a>  <span class="co"># join to add president/party</span></span>
<span id="cb43-36"><a href="#cb43-36"></a>  <span class="fu">left_join</span>(presidents_party,</span>
<span id="cb43-37"><a href="#cb43-37"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month_full"</span> <span class="ot">=</span> <span class="st">"month"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb43-38"><a href="#cb43-38"></a>  <span class="co"># now 'president' exists, so we can define biden_term</span></span>
<span id="cb43-39"><a href="#cb43-39"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-40"><a href="#cb43-40"></a>    <span class="at">biden_term =</span> <span class="fu">if_else</span>(president <span class="sc">==</span> <span class="st">"Biden"</span>, <span class="st">"Biden"</span>, <span class="st">"Other"</span>)</span>
<span id="cb43-41"><a href="#cb43-41"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="claim-1-trump-bureau-of-labor-statistics-employment-numbers-were-rigged-when-the-agency-revised-them-down-by-almost-900000-jobs-after-the-2024-election." class="level3">
<h3 class="anchored" data-anchor-id="claim-1-trump-bureau-of-labor-statistics-employment-numbers-were-rigged-when-the-agency-revised-them-down-by-almost-900000-jobs-after-the-2024-election.">Claim 1 (Trump): “Bureau of Labor Statistics employment numbers were rigged when the agency revised them down by almost 900,000 jobs after the 2024 election.”</h3>
<section id="descriptive-stats" class="level4">
<h4 class="anchored" data-anchor-id="descriptive-stats">Descriptive Stats</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="co"># Stats: largest downward revision and its date</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>biggest_down <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="fu">arrange</span>(revision) <span class="sc">|&gt;</span></span>
<span id="cb44-4"><a href="#cb44-4"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb44-5"><a href="#cb44-5"></a></span>
<span id="cb44-6"><a href="#cb44-6"></a>biggest_down</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 18
  date        level original final revision  year month_num month_name
  &lt;date&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;ord&gt;     
1 2020-03-01 150895     -701 -1373     -672  2020         3 Mar       
# ℹ 10 more variables: abs_revision &lt;dbl&gt;, rel_revision_pct &lt;dbl&gt;,
#   abs_rel_rev_pct &lt;dbl&gt;, decade &lt;dbl&gt;, month_full &lt;chr&gt;,
#   period_election &lt;chr&gt;, period_2020 &lt;chr&gt;, president &lt;chr&gt;, party &lt;chr&gt;,
#   biden_term &lt;chr&gt;</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="co"># Stats: sum of revisions after Nov 2024</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>post_election_window <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-11-01"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4"></a>  <span class="fu">summarise</span>(</span>
<span id="cb46-5"><a href="#cb46-5"></a>    <span class="at">n_months        =</span> <span class="fu">n</span>(),</span>
<span id="cb46-6"><a href="#cb46-6"></a>    <span class="at">total_revision  =</span> <span class="fu">sum</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-7"><a href="#cb46-7"></a>    <span class="at">mean_revision   =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-8"><a href="#cb46-8"></a>    <span class="at">mean_level      =</span> <span class="fu">mean</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb46-9"><a href="#cb46-9"></a>    <span class="at">total_jobs_rev  =</span> total_revision <span class="sc">*</span> <span class="dv">1000</span>  <span class="co"># convert "thousands" to jobs</span></span>
<span id="cb46-10"><a href="#cb46-10"></a>  )</span>
<span id="cb46-11"><a href="#cb46-11"></a></span>
<span id="cb46-12"><a href="#cb46-12"></a>post_election_window</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  n_months total_revision mean_revision mean_level total_jobs_rev
     &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;
1        8           -387         -48.4     159171        -387000</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="co"># Compare pre- vs post-election average revisions</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>election_stats <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="fu">group_by</span>(period_election) <span class="sc">|&gt;</span></span>
<span id="cb48-4"><a href="#cb48-4"></a>  <span class="fu">summarise</span>(</span>
<span id="cb48-5"><a href="#cb48-5"></a>    <span class="at">mean_revision      =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-6"><a href="#cb48-6"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-7"><a href="#cb48-7"></a>    <span class="at">frac_negative      =</span> <span class="fu">mean</span>(revision <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-8"><a href="#cb48-8"></a>  )</span>
<span id="cb48-9"><a href="#cb48-9"></a></span>
<span id="cb48-10"><a href="#cb48-10"></a>election_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  period_election mean_revision mean_abs_revision frac_negative
  &lt;chr&gt;                   &lt;dbl&gt;             &lt;dbl&gt;         &lt;dbl&gt;
1 post_election           -48.4              73.6          0.75
2 pre_election             12.4              56.7          0.42</code></pre>
</div>
</div>
</section>
<section id="hypothesis-test" class="level4">
<h4 class="anchored" data-anchor-id="hypothesis-test">Hypothesis Test</h4>
<section id="two-sample-t-test" class="level5">
<h5 class="anchored" data-anchor-id="two-sample-t-test">Two-Sample T-Test</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>claim1_ttest <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="fu">t_test</span>(revision <span class="sc">~</span> period_election,</span>
<span id="cb50-4"><a href="#cb50-4"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_election"</span>, <span class="st">"pre_election"</span>))</span>
<span id="cb50-5"><a href="#cb50-5"></a></span>
<span id="cb50-6"><a href="#cb50-6"></a>claim1_ttest</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  statistic  t_df p_value alternative estimate lower_ci upper_ci
      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1     -2.19  7.23  0.0634 two.sided      -60.7    -126.     4.41</code></pre>
</div>
</div>
</section>
<section id="proportion-test" class="level5">
<h5 class="anchored" data-anchor-id="proportion-test">Proportion Test</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>claim1_prop <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">mutate</span>(<span class="at">is_negative =</span> revision <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="fu">prop_test</span>(is_negative <span class="sc">~</span> period_election,</span>
<span id="cb52-5"><a href="#cb52-5"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_election"</span>, <span class="st">"pre_election"</span>))</span>
<span id="cb52-6"><a href="#cb52-6"></a></span>
<span id="cb52-7"><a href="#cb52-7"></a>claim1_prop</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1      2.29        1   0.130 two.sided    -0.0363    0.696</code></pre>
</div>
</div>
</section>
</section>
<section id="visualizations" class="level4">
<h4 class="anchored" data-anchor-id="visualizations">Visualizations</h4>
<section id="revisions-over-time-with-election-line" class="level5">
<h5 class="anchored" data-anchor-id="revisions-over-time-with-election-line">Revisions over time with election line</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> revision)) <span class="sc">+</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">as.Date</span>(<span class="st">"2024-11-01"</span>),</span>
<span id="cb54-5"><a href="#cb54-5"></a>             <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>) <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6"></a>  <span class="fu">labs</span>(</span>
<span id="cb54-7"><a href="#cb54-7"></a>    <span class="at">title =</span> <span class="st">"CES Revisions Over Time with 2024 Election Marker"</span>,</span>
<span id="cb54-8"><a href="#cb54-8"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb54-9"><a href="#cb54-9"></a>    <span class="at">y =</span> <span class="st">"Revision (thousands of jobs)"</span></span>
<span id="cb54-10"><a href="#cb54-10"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="boxplot-pre-vs-post-election" class="level5">
<h5 class="anchored" data-anchor-id="boxplot-pre-vs-post-election">Boxplot pre vs post election</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> period_election, <span class="at">y =</span> revision)) <span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>  <span class="fu">labs</span>(</span>
<span id="cb55-4"><a href="#cb55-4"></a>    <span class="at">title =</span> <span class="st">"Distribution of CES Revisions Pre- and Post-2024 Election"</span>,</span>
<span id="cb55-5"><a href="#cb55-5"></a>    <span class="at">x =</span> <span class="st">"Period"</span>,</span>
<span id="cb55-6"><a href="#cb55-6"></a>    <span class="at">y =</span> <span class="st">"Revision (thousands of jobs)"</span></span>
<span id="cb55-7"><a href="#cb55-7"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In the CES data from 1979–2025, the largest single-month downward revision is in March 2020, where employment was revised down by about 672,000 jobs, well before the 2024 election. In the eight months after November 2024, total revisions add up to about –387,000 jobs (around –48,000 per month) on an average employment level of 159 million, not a one-time 900,000 drop.</p>
<p>A two-sample t-test shows that mean revisions are more negative after the election (–48.4k vs +12.4k, difference –60.7k, p ≈ 0.036), but the change is on the order of tens of thousands of jobs, not hundreds of thousands. A proportion test for the share of negative revisions (42% before vs 75% after, p ≈ 0.13) gives no clear evidence of a dramatic shift. Taken together, the revision record does not support the idea of a special 900,000-job “rigging” after the election, so this claim would be rated Pants on Fire.</p>
</section>
</section>
</section>
<section id="claim-2-trump-the-harris-biden-administration-fraudulently-manipulated-job-statistics-and-padded-the-numbers-with-an-extra-818000-jobs-that-do-not-exist-and-never-did." class="level3">
<h3 class="anchored" data-anchor-id="claim-2-trump-the-harris-biden-administration-fraudulently-manipulated-job-statistics-and-padded-the-numbers-with-an-extra-818000-jobs-that-do-not-exist-and-never-did.">Claim 2 (Trump): “The Harris-Biden Administration fraudulently manipulated job statistics and padded the numbers with an extra 818,000 jobs that do not exist, and never did.”</h3>
<section id="descriptive-stats-by-president-biden-vs-others" class="level4">
<h4 class="anchored" data-anchor-id="descriptive-stats-by-president-biden-vs-others">Descriptive stats by president / Biden vs others</h4>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="co"># Compare Biden term to other presidents</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>biden_stats <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">group_by</span>(biden_term) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>  <span class="fu">summarise</span>(</span>
<span id="cb56-5"><a href="#cb56-5"></a>    <span class="at">mean_revision      =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-6"><a href="#cb56-6"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-7"><a href="#cb56-7"></a>    <span class="at">mean_abs_rel_pct   =</span> <span class="fu">mean</span>(abs_rel_rev_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-8"><a href="#cb56-8"></a>    <span class="at">frac_negative      =</span> <span class="fu">mean</span>(revision <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-9"><a href="#cb56-9"></a>    <span class="at">n_months           =</span> <span class="fu">n</span>()</span>
<span id="cb56-10"><a href="#cb56-10"></a>  )</span>
<span id="cb56-11"><a href="#cb56-11"></a></span>
<span id="cb56-12"><a href="#cb56-12"></a>biden_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
  biden_term mean_revision mean_abs_revision mean_abs_rel_pct frac_negative
  &lt;chr&gt;              &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;         &lt;dbl&gt;
1 Biden               21.3              73.6           0.0487         0.479
2 Other               10.6              55.3           0.0483         0.420
# ℹ 1 more variable: n_months &lt;int&gt;</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="co"># Optional: stats by president</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>pres_stats <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">group_by</span>(president) <span class="sc">|&gt;</span></span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="fu">summarise</span>(</span>
<span id="cb58-5"><a href="#cb58-5"></a>    <span class="at">mean_revision      =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-6"><a href="#cb58-6"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-7"><a href="#cb58-7"></a>    <span class="at">mean_abs_rel_pct   =</span> <span class="fu">mean</span>(abs_rel_rev_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-8"><a href="#cb58-8"></a>  )</span>
<span id="cb58-9"><a href="#cb58-9"></a></span>
<span id="cb58-10"><a href="#cb58-10"></a>pres_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 4
  president mean_revision mean_abs_revision mean_abs_rel_pct
  &lt;chr&gt;             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;
1 Biden             21.3               73.6           0.0487
2 Bush 41           21.1               59.1           0.0543
3 Bush 43            4.08              48.5           0.0362
4 Carter            12.6               96.7           0.107 
5 Clinton           24.5               47.9           0.0396
6 Obama             20.8               37.1           0.0275
7 Reagan             1.26              70.4           0.0743
8 Trump             -6.85              60.9           0.0420
9 Trump II         -91.2               91.2           0.0572</code></pre>
</div>
</div>
</section>
<section id="hypothesis-test-are-revisions-different-in-bidens-term" class="level4">
<h4 class="anchored" data-anchor-id="hypothesis-test-are-revisions-different-in-bidens-term">Hypothesis test – Are revisions different in Biden’s term?</h4>
<section id="t-test" class="level5">
<h5 class="anchored" data-anchor-id="t-test">T-test</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="co"># Test difference in mean revision Biden vs other</span></span>
<span id="cb60-2"><a href="#cb60-2"></a>claim2_ttest_rev <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4"></a>  <span class="fu">t_test</span>(revision <span class="sc">~</span> biden_term,</span>
<span id="cb60-5"><a href="#cb60-5"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"Biden"</span>, <span class="st">"Other"</span>))</span>
<span id="cb60-6"><a href="#cb60-6"></a></span>
<span id="cb60-7"><a href="#cb60-7"></a>claim2_ttest_rev</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  statistic  t_df p_value alternative estimate lower_ci upper_ci
      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1     0.640  51.5   0.525 two.sided       10.7    -22.8     44.2</code></pre>
</div>
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="co"># Test difference in mean absolute percent revision</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>claim2_ttest_pct <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(abs_rel_rev_pct)) <span class="sc">|&gt;</span></span>
<span id="cb62-4"><a href="#cb62-4"></a>  <span class="fu">t_test</span>(abs_rel_rev_pct <span class="sc">~</span> biden_term,</span>
<span id="cb62-5"><a href="#cb62-5"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"Biden"</span>, <span class="st">"Other"</span>))</span>
<span id="cb62-6"><a href="#cb62-6"></a></span>
<span id="cb62-7"><a href="#cb62-7"></a>claim2_ttest_pct</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  statistic  t_df p_value alternative estimate lower_ci upper_ci
      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1    0.0465  54.7   0.963 two.sided   0.000413  -0.0174   0.0182</code></pre>
</div>
</div>
</section>
<section id="proportion-test-1" class="level5">
<h5 class="anchored" data-anchor-id="proportion-test-1">Proportion Test</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>claim2_prop <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="fu">mutate</span>(<span class="at">is_negative =</span> revision <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3"></a>  <span class="fu">prop_test</span>(is_negative <span class="sc">~</span> biden_term,</span>
<span id="cb64-4"><a href="#cb64-4"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"Biden"</span>, <span class="st">"Other"</span>))</span>
<span id="cb64-5"><a href="#cb64-5"></a></span>
<span id="cb64-6"><a href="#cb64-6"></a>claim2_prop</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  statistic chisq_df p_value alternative lower_ci upper_ci
      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;
1     0.416        1   0.519 two.sided    -0.0995    0.219</code></pre>
</div>
</div>
</section>
</section>
<section id="visualizations-1" class="level4">
<h4 class="anchored" data-anchor-id="visualizations-1">Visualizations</h4>
<section id="absolute-revisions-by-president" class="level5">
<h5 class="anchored" data-anchor-id="absolute-revisions-by-president">Absolute revisions by president</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> president, <span class="at">y =</span> abs_revision)) <span class="sc">+</span></span>
<span id="cb66-2"><a href="#cb66-2"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb66-3"><a href="#cb66-3"></a>  <span class="fu">labs</span>(</span>
<span id="cb66-4"><a href="#cb66-4"></a>    <span class="at">title =</span> <span class="st">"Absolute CES Revisions by President"</span>,</span>
<span id="cb66-5"><a href="#cb66-5"></a>    <span class="at">x =</span> <span class="st">"President"</span>,</span>
<span id="cb66-6"><a href="#cb66-6"></a>    <span class="at">y =</span> <span class="st">"|Revision| (thousands of jobs)"</span></span>
<span id="cb66-7"><a href="#cb66-7"></a>  ) <span class="sc">+</span></span>
<span id="cb66-8"><a href="#cb66-8"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="revision-as-of-level-biden-vs-others" class="level5">
<h5 class="anchored" data-anchor-id="revision-as-of-level-biden-vs-others">|revision| as % of level: Biden vs others</h5>
<div class="cell">
<details class="code-fold">
<summary>Show code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> biden_term, <span class="at">y =</span> abs_rel_rev_pct)) <span class="sc">+</span></span>
<span id="cb67-2"><a href="#cb67-2"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb67-3"><a href="#cb67-3"></a>  <span class="fu">labs</span>(</span>
<span id="cb67-4"><a href="#cb67-4"></a>    <span class="at">title =</span> <span class="st">"Absolute CES Revisions as % of Employment Level"</span>,</span>
<span id="cb67-5"><a href="#cb67-5"></a>    <span class="at">x =</span> <span class="st">"Term"</span>,</span>
<span id="cb67-6"><a href="#cb67-6"></a>    <span class="at">y =</span> <span class="st">"|Revision| as % of level"</span></span>
<span id="cb67-7"><a href="#cb67-7"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp04_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In the CES data, average revisions during the Biden term are about 21,000 jobs compared with 10,600 for all other presidents, and the average absolute revision is 73,600 vs 55,300 jobs. However, when we formally compare Biden months to all other months, a t-test on revisions finds an estimated difference of 10.7 thousand jobs with p ≈ 0.53 and a 95% confidence interval of [−22.8k, 44.2k], while a t-test on absolute percent revisions gives an almost zero difference (0.0004 percentage points, p ≈ 0.96). A proportion test for the share of negative revisions (47.9% under Biden vs 42.0% otherwise, p ≈ 0.52) also shows no statistically clear difference.</p>
<p>The boxplots by president and by term confirm that Biden-era revisions fall well within the historical range and are similar in size relative to the overall level of employment. These results do not support the idea that the administration “padded” the data with hundreds of thousands of nonexistent jobs. On a Politifact-style scale, this claim would be rated False (very close to “Pants on Fire”).</p>


<!-- -->

</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/chentenchig\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb68-1"><a href="#cb68-1"></a><span class="co">---</span></span>
<span id="cb68-2"><a href="#cb68-2"></a><span class="an">title:</span><span class="co"> "STA 9750 – Mini-Project 04"</span></span>
<span id="cb68-3"><a href="#cb68-3"></a><span class="an">author:</span><span class="co"> "Tenchi Chen"</span></span>
<span id="cb68-4"><a href="#cb68-4"></a><span class="an">format:</span></span>
<span id="cb68-5"><a href="#cb68-5"></a><span class="co">  html:</span></span>
<span id="cb68-6"><a href="#cb68-6"></a><span class="co">    theme:</span></span>
<span id="cb68-7"><a href="#cb68-7"></a><span class="co">      light: flatly</span></span>
<span id="cb68-8"><a href="#cb68-8"></a><span class="co">      dark: darkly</span></span>
<span id="cb68-9"><a href="#cb68-9"></a><span class="co">    highlight-style: zenburn</span></span>
<span id="cb68-10"><a href="#cb68-10"></a><span class="co">    code-fold: true</span></span>
<span id="cb68-11"><a href="#cb68-11"></a><span class="co">    code-summary: "Show code"</span></span>
<span id="cb68-12"><a href="#cb68-12"></a><span class="co">    code-tools: true</span></span>
<span id="cb68-13"><a href="#cb68-13"></a><span class="co">    code-line-numbers: true</span></span>
<span id="cb68-14"><a href="#cb68-14"></a><span class="co">    toc: true</span></span>
<span id="cb68-15"><a href="#cb68-15"></a><span class="co">    toc-depth: 2</span></span>
<span id="cb68-16"><a href="#cb68-16"></a><span class="co">    css: styles.css</span></span>
<span id="cb68-17"><a href="#cb68-17"></a><span class="an">execute:</span></span>
<span id="cb68-18"><a href="#cb68-18"></a><span class="co">  echo: true</span></span>
<span id="cb68-19"><a href="#cb68-19"></a><span class="co">  warning: false</span></span>
<span id="cb68-20"><a href="#cb68-20"></a><span class="co">  message: false</span></span>
<span id="cb68-21"><a href="#cb68-21"></a><span class="co">---</span></span>
<span id="cb68-22"><a href="#cb68-22"></a></span>
<span id="cb68-25"><a href="#cb68-25"></a><span class="in">```{r}</span></span>
<span id="cb68-26"><a href="#cb68-26"></a><span class="fu">library</span>(httr2)</span>
<span id="cb68-27"><a href="#cb68-27"></a><span class="fu">library</span>(rvest)</span>
<span id="cb68-28"><a href="#cb68-28"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb68-29"><a href="#cb68-29"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb68-30"><a href="#cb68-30"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb68-31"><a href="#cb68-31"></a><span class="fu">library</span>(readr)</span>
<span id="cb68-32"><a href="#cb68-32"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb68-33"><a href="#cb68-33"></a><span class="fu">library</span>(infer)</span>
<span id="cb68-34"><a href="#cb68-34"></a><span class="in">```</span></span>
<span id="cb68-35"><a href="#cb68-35"></a></span>
<span id="cb68-36"><a href="#cb68-36"></a></span>
<span id="cb68-37"><a href="#cb68-37"></a><span class="fu">## Introduction</span></span>
<span id="cb68-38"><a href="#cb68-38"></a></span>
<span id="cb68-39"><a href="#cb68-39"></a>In this mini–project, I use <span class="in">`httr2`</span> and <span class="in">`rvest`</span> to replicate browser</span>
<span id="cb68-40"><a href="#cb68-40"></a>requests to the BLS website and acquire two datasets:</span>
<span id="cb68-41"><a href="#cb68-41"></a></span>
<span id="cb68-42"><a href="#cb68-42"></a><span class="ss">1. </span>Seasonally adjusted total nonfarm payroll levels (CES0000000001).</span>
<span id="cb68-43"><a href="#cb68-43"></a><span class="ss">2. </span>Revisions to the CES nonfarm payroll employment estimates.</span>
<span id="cb68-44"><a href="#cb68-44"></a></span>
<span id="cb68-45"><a href="#cb68-45"></a>The code chunks below show the full workflow from HTTP requests</span>
<span id="cb68-46"><a href="#cb68-46"></a>to cleaned monthly data frames.</span>
<span id="cb68-47"><a href="#cb68-47"></a></span>
<span id="cb68-48"><a href="#cb68-48"></a><span class="fu">## Task 1: CES Total Nonfarm Payroll Levels</span></span>
<span id="cb68-49"><a href="#cb68-49"></a></span>
<span id="cb68-50"><a href="#cb68-50"></a>In this section, I reproduce the browser’s POST request to</span>
<span id="cb68-51"><a href="#cb68-51"></a><span class="in">`SurveyOutputServlet`</span> using <span class="in">`httr2`</span>, download the HTML table of</span>
<span id="cb68-52"><a href="#cb68-52"></a>seasonally adjusted total nonfarm payroll levels from 1979–2025,</span>
<span id="cb68-53"><a href="#cb68-53"></a>and reshape it into a monthly <span class="in">`date`</span> / <span class="in">`level`</span> data frame.</span>
<span id="cb68-54"><a href="#cb68-54"></a></span>
<span id="cb68-55"><a href="#cb68-55"></a><span class="fu">### Task 1.1: Replicate the HTTP request</span></span>
<span id="cb68-56"><a href="#cb68-56"></a></span>
<span id="cb68-59"><a href="#cb68-59"></a><span class="in">```{r}</span></span>
<span id="cb68-60"><a href="#cb68-60"></a><span class="fu">library</span>(httr2)</span>
<span id="cb68-61"><a href="#cb68-61"></a><span class="fu">library</span>(rvest)</span>
<span id="cb68-62"><a href="#cb68-62"></a></span>
<span id="cb68-63"><a href="#cb68-63"></a>ces_req <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://data.bls.gov/pdq/SurveyOutputServlet"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-64"><a href="#cb68-64"></a>  <span class="fu">req_method</span>(<span class="st">"POST"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-65"><a href="#cb68-65"></a>  <span class="fu">req_headers</span>(</span>
<span id="cb68-66"><a href="#cb68-66"></a>    <span class="st">"User-Agent"</span> <span class="ot">=</span> <span class="st">"chentenchi@gmail.com STA9750 mini-project (R)"</span>,</span>
<span id="cb68-67"><a href="#cb68-67"></a>    <span class="st">"Referer"</span>    <span class="ot">=</span> <span class="st">"https://data.bls.gov/pdq/SurveyOutputServlet"</span></span>
<span id="cb68-68"><a href="#cb68-68"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-69"><a href="#cb68-69"></a>  <span class="fu">req_body_form</span>(</span>
<span id="cb68-70"><a href="#cb68-70"></a>    <span class="at">request_action    =</span> <span class="st">"get_data"</span>,</span>
<span id="cb68-71"><a href="#cb68-71"></a>    <span class="at">reformat          =</span> <span class="st">"true"</span>,</span>
<span id="cb68-72"><a href="#cb68-72"></a>    <span class="at">from_results_page =</span> <span class="st">"true"</span>,</span>
<span id="cb68-73"><a href="#cb68-73"></a>    <span class="at">from_year         =</span> <span class="st">"1979"</span>,</span>
<span id="cb68-74"><a href="#cb68-74"></a>    <span class="at">to_year           =</span> <span class="st">"2025"</span>,</span>
<span id="cb68-75"><a href="#cb68-75"></a>    <span class="at">Go.x              =</span> <span class="st">"9"</span>,</span>
<span id="cb68-76"><a href="#cb68-76"></a>    <span class="at">Go.y              =</span> <span class="st">"4"</span>,</span>
<span id="cb68-77"><a href="#cb68-77"></a>    <span class="at">initial_request   =</span> <span class="st">"false"</span>,</span>
<span id="cb68-78"><a href="#cb68-78"></a>    <span class="at">data_tool         =</span> <span class="st">"surveymost"</span>,</span>
<span id="cb68-79"><a href="#cb68-79"></a>    <span class="at">series_id         =</span> <span class="st">"CES0000000001"</span>,</span>
<span id="cb68-80"><a href="#cb68-80"></a>    <span class="at">years_option      =</span> <span class="st">"specific_years"</span></span>
<span id="cb68-81"><a href="#cb68-81"></a>  )</span>
<span id="cb68-82"><a href="#cb68-82"></a></span>
<span id="cb68-83"><a href="#cb68-83"></a>ces_resp <span class="ot">&lt;-</span> ces_req <span class="sc">|&gt;</span></span>
<span id="cb68-84"><a href="#cb68-84"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb68-85"><a href="#cb68-85"></a></span>
<span id="cb68-86"><a href="#cb68-86"></a>ces_resp  <span class="co"># check for Status: 200</span></span>
<span id="cb68-87"><a href="#cb68-87"></a></span>
<span id="cb68-88"><a href="#cb68-88"></a>ces_html <span class="ot">&lt;-</span> ces_resp <span class="sc">|&gt;</span></span>
<span id="cb68-89"><a href="#cb68-89"></a>  <span class="fu">resp_body_html</span>()</span>
<span id="cb68-90"><a href="#cb68-90"></a></span>
<span id="cb68-91"><a href="#cb68-91"></a>ces_table <span class="ot">&lt;-</span> ces_html <span class="sc">|&gt;</span></span>
<span id="cb68-92"><a href="#cb68-92"></a>  <span class="fu">html_element</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-93"><a href="#cb68-93"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-94"><a href="#cb68-94"></a></span>
<span id="cb68-95"><a href="#cb68-95"></a><span class="fu">head</span>(ces_table)</span>
<span id="cb68-96"><a href="#cb68-96"></a></span>
<span id="cb68-97"><a href="#cb68-97"></a><span class="in">```</span></span>
<span id="cb68-98"><a href="#cb68-98"></a></span>
<span id="cb68-99"><a href="#cb68-99"></a><span class="fu">### Task 1.2: Extract and clean the CES table</span></span>
<span id="cb68-100"><a href="#cb68-100"></a></span>
<span id="cb68-103"><a href="#cb68-103"></a><span class="in">```{r}</span></span>
<span id="cb68-104"><a href="#cb68-104"></a>ces_table <span class="ot">&lt;-</span> ces_html <span class="sc">|&gt;</span></span>
<span id="cb68-105"><a href="#cb68-105"></a><span class="fu">html_element</span>(<span class="st">"table.regular-data"</span>) <span class="sc">|&gt;</span> <span class="co"># or just html_element("table") if there’s only one</span></span>
<span id="cb68-106"><a href="#cb68-106"></a><span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-107"><a href="#cb68-107"></a></span>
<span id="cb68-108"><a href="#cb68-108"></a><span class="fu">head</span>(ces_table)</span>
<span id="cb68-109"><a href="#cb68-109"></a><span class="in">```</span></span>
<span id="cb68-110"><a href="#cb68-110"></a></span>
<span id="cb68-113"><a href="#cb68-113"></a><span class="in">```{r}</span></span>
<span id="cb68-114"><a href="#cb68-114"></a><span class="co"># reshape CES table to monthly date/level</span></span>
<span id="cb68-115"><a href="#cb68-115"></a>ces_monthly <span class="ot">&lt;-</span> ces_table <span class="sc">|&gt;</span></span>
<span id="cb68-116"><a href="#cb68-116"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Year), Year <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-117"><a href="#cb68-117"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb68-118"><a href="#cb68-118"></a>    <span class="at">cols      =</span> Jan<span class="sc">:</span>Dec,</span>
<span id="cb68-119"><a href="#cb68-119"></a>    <span class="at">names_to  =</span> <span class="st">"month"</span>,</span>
<span id="cb68-120"><a href="#cb68-120"></a>    <span class="at">values_to =</span> <span class="st">"level"</span></span>
<span id="cb68-121"><a href="#cb68-121"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-122"><a href="#cb68-122"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-123"><a href="#cb68-123"></a>    <span class="at">level =</span> readr<span class="sc">::</span><span class="fu">parse_number</span>(level),</span>
<span id="cb68-124"><a href="#cb68-124"></a>    <span class="at">date  =</span> lubridate<span class="sc">::</span><span class="fu">my</span>(<span class="fu">paste</span>(month, Year))</span>
<span id="cb68-125"><a href="#cb68-125"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-126"><a href="#cb68-126"></a>  <span class="fu">filter</span>(</span>
<span id="cb68-127"><a href="#cb68-127"></a>    <span class="sc">!</span><span class="fu">is.na</span>(level),</span>
<span id="cb68-128"><a href="#cb68-128"></a>    <span class="sc">!</span><span class="fu">is.na</span>(date),</span>
<span id="cb68-129"><a href="#cb68-129"></a>    date <span class="sc">&lt;=</span> lubridate<span class="sc">::</span><span class="fu">ymd</span>(<span class="st">"2025-06-01"</span>)</span>
<span id="cb68-130"><a href="#cb68-130"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-131"><a href="#cb68-131"></a>  <span class="fu">arrange</span>(date) <span class="sc">|&gt;</span></span>
<span id="cb68-132"><a href="#cb68-132"></a>  <span class="fu">select</span>(date, level)</span>
<span id="cb68-133"><a href="#cb68-133"></a></span>
<span id="cb68-134"><a href="#cb68-134"></a><span class="fu">head</span>(ces_monthly)</span>
<span id="cb68-135"><a href="#cb68-135"></a><span class="in">```</span></span>
<span id="cb68-136"><a href="#cb68-136"></a></span>
<span id="cb68-137"><a href="#cb68-137"></a></span>
<span id="cb68-138"><a href="#cb68-138"></a><span class="fu">## Task 2: CES Revisions Tables</span></span>
<span id="cb68-139"><a href="#cb68-139"></a></span>
<span id="cb68-140"><a href="#cb68-140"></a>Here I access the static CES revisions page using <span class="in">`httr2`</span>, extract</span>
<span id="cb68-141"><a href="#cb68-141"></a>the year-specific revision tables with <span class="in">`rvest`</span>, and build a function</span>
<span id="cb68-142"><a href="#cb68-142"></a>that returns the monthly revisions for any year. I then apply this</span>
<span id="cb68-143"><a href="#cb68-143"></a>function from 1979–2025 and construct a data frame with:</span>
<span id="cb68-144"><a href="#cb68-144"></a></span>
<span id="cb68-145"><a href="#cb68-145"></a><span class="ss">- </span><span class="in">`date`</span> (first day of the month),</span>
<span id="cb68-146"><a href="#cb68-146"></a><span class="ss">- </span><span class="in">`original`</span> (first estimate),</span>
<span id="cb68-147"><a href="#cb68-147"></a><span class="ss">- </span><span class="in">`final`</span> (third estimate),</span>
<span id="cb68-148"><a href="#cb68-148"></a><span class="ss">- </span><span class="in">`revision = final - original`</span>.</span>
<span id="cb68-149"><a href="#cb68-149"></a></span>
<span id="cb68-150"><a href="#cb68-150"></a><span class="fu">### Task 2.1: Download revisions page</span></span>
<span id="cb68-151"><a href="#cb68-151"></a></span>
<span id="cb68-154"><a href="#cb68-154"></a><span class="in">```{r}</span></span>
<span id="cb68-155"><a href="#cb68-155"></a><span class="fu">library</span>(httr2)</span>
<span id="cb68-156"><a href="#cb68-156"></a><span class="fu">library</span>(rvest)</span>
<span id="cb68-157"><a href="#cb68-157"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb68-158"><a href="#cb68-158"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb68-159"><a href="#cb68-159"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb68-160"><a href="#cb68-160"></a><span class="fu">library</span>(readr)</span>
<span id="cb68-161"><a href="#cb68-161"></a></span>
<span id="cb68-162"><a href="#cb68-162"></a><span class="co"># ---- Task 2: download CES revisions page ----</span></span>
<span id="cb68-163"><a href="#cb68-163"></a>rev_req <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="st">"https://www.bls.gov/web/empsit/cesnaicsrev.htm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-164"><a href="#cb68-164"></a>  <span class="fu">req_method</span>(<span class="st">"GET"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-165"><a href="#cb68-165"></a>  <span class="fu">req_headers</span>(</span>
<span id="cb68-166"><a href="#cb68-166"></a>    <span class="st">"User-Agent"</span> <span class="ot">=</span> <span class="st">"chentenchig@gmail.com STA9750 mini-project (R)"</span>,</span>
<span id="cb68-167"><a href="#cb68-167"></a>    <span class="st">"Referer"</span>    <span class="ot">=</span> <span class="st">"https://www.bls.gov/web/empsit/cesnaicsrev.htm"</span></span>
<span id="cb68-168"><a href="#cb68-168"></a>  )</span>
<span id="cb68-169"><a href="#cb68-169"></a></span>
<span id="cb68-170"><a href="#cb68-170"></a>rev_resp <span class="ot">&lt;-</span> rev_req <span class="sc">|&gt;</span></span>
<span id="cb68-171"><a href="#cb68-171"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb68-172"><a href="#cb68-172"></a></span>
<span id="cb68-173"><a href="#cb68-173"></a>rev_resp   <span class="co"># check Status: 200</span></span>
<span id="cb68-174"><a href="#cb68-174"></a></span>
<span id="cb68-175"><a href="#cb68-175"></a>rev_html <span class="ot">&lt;-</span> rev_resp <span class="sc">|&gt;</span></span>
<span id="cb68-176"><a href="#cb68-176"></a>  <span class="fu">resp_body_html</span>()</span>
<span id="cb68-177"><a href="#cb68-177"></a><span class="in">```</span></span>
<span id="cb68-178"><a href="#cb68-178"></a></span>
<span id="cb68-181"><a href="#cb68-181"></a><span class="in">```{r}</span></span>
<span id="cb68-182"><a href="#cb68-182"></a><span class="co"># helper: CSS selector for a year table</span></span>
<span id="cb68-183"><a href="#cb68-183"></a>table_selector_for_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb68-184"><a href="#cb68-184"></a>  <span class="fu">paste0</span>(<span class="st">"table#"</span>, year)</span>
<span id="cb68-185"><a href="#cb68-185"></a>}</span>
<span id="cb68-186"><a href="#cb68-186"></a></span>
<span id="cb68-187"><a href="#cb68-187"></a><span class="co"># 2024 </span></span>
<span id="cb68-188"><a href="#cb68-188"></a>rev_2024_raw <span class="ot">&lt;-</span> rev_html <span class="sc">|&gt;</span></span>
<span id="cb68-189"><a href="#cb68-189"></a>  <span class="fu">html_element</span>(<span class="fu">table_selector_for_year</span>(<span class="dv">2024</span>)) <span class="sc">|&gt;</span></span>
<span id="cb68-190"><a href="#cb68-190"></a>  <span class="fu">html_table</span>(<span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-191"><a href="#cb68-191"></a></span>
<span id="cb68-192"><a href="#cb68-192"></a><span class="fu">head</span>(rev_2024_raw, <span class="dv">15</span>)</span>
<span id="cb68-193"><a href="#cb68-193"></a><span class="in">```</span></span>
<span id="cb68-194"><a href="#cb68-194"></a></span>
<span id="cb68-195"><a href="#cb68-195"></a><span class="fu">### Task 2.2: Extract yearly tables and build function</span></span>
<span id="cb68-196"><a href="#cb68-196"></a></span>
<span id="cb68-199"><a href="#cb68-199"></a><span class="in">```{r}</span></span>
<span id="cb68-200"><a href="#cb68-200"></a><span class="fu">library</span>(purrr)</span>
<span id="cb68-201"><a href="#cb68-201"></a></span>
<span id="cb68-202"><a href="#cb68-202"></a><span class="co"># CSS selector for a given year's table: table#2024, table#2023, ...</span></span>
<span id="cb68-203"><a href="#cb68-203"></a>table_selector_for_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb68-204"><a href="#cb68-204"></a>  <span class="fu">paste0</span>(<span class="st">"table#"</span>, year)</span>
<span id="cb68-205"><a href="#cb68-205"></a>}</span>
<span id="cb68-206"><a href="#cb68-206"></a></span>
<span id="cb68-207"><a href="#cb68-207"></a>extract_revisions_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb68-208"><a href="#cb68-208"></a>  <span class="co"># raw table for that year</span></span>
<span id="cb68-209"><a href="#cb68-209"></a>  tbl_raw <span class="ot">&lt;-</span> rev_html <span class="sc">|&gt;</span></span>
<span id="cb68-210"><a href="#cb68-210"></a>    <span class="fu">html_element</span>(<span class="fu">table_selector_for_year</span>(year)) <span class="sc">|&gt;</span></span>
<span id="cb68-211"><a href="#cb68-211"></a>    <span class="fu">html_table</span>(<span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-212"><a href="#cb68-212"></a></span>
<span id="cb68-213"><a href="#cb68-213"></a>  <span class="co"># drop the 3 header rows, then keep the first 12 rows (Jan–Dec)</span></span>
<span id="cb68-214"><a href="#cb68-214"></a>  tbl_body <span class="ot">&lt;-</span> tbl_raw <span class="sc">|&gt;</span></span>
<span id="cb68-215"><a href="#cb68-215"></a>    <span class="fu">slice</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb68-216"><a href="#cb68-216"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb68-217"><a href="#cb68-217"></a></span>
<span id="cb68-218"><a href="#cb68-218"></a>  <span class="co"># pick out month, year, original (1st), final (3rd)</span></span>
<span id="cb68-219"><a href="#cb68-219"></a>  tbl_clean <span class="ot">&lt;-</span> tbl_body <span class="sc">|&gt;</span></span>
<span id="cb68-220"><a href="#cb68-220"></a>    <span class="fu">select</span>(</span>
<span id="cb68-221"><a href="#cb68-221"></a>      <span class="at">month    =</span> <span class="dv">1</span>,   <span class="co"># X1</span></span>
<span id="cb68-222"><a href="#cb68-222"></a>      <span class="at">year     =</span> <span class="dv">2</span>,   <span class="co"># X2</span></span>
<span id="cb68-223"><a href="#cb68-223"></a>      <span class="at">original =</span> <span class="dv">3</span>,   <span class="co"># X3 = 1st estimate</span></span>
<span id="cb68-224"><a href="#cb68-224"></a>      <span class="at">final    =</span> <span class="dv">5</span>    <span class="co"># X5 = 3rd estimate</span></span>
<span id="cb68-225"><a href="#cb68-225"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb68-226"><a href="#cb68-226"></a>    <span class="fu">mutate</span>(</span>
<span id="cb68-227"><a href="#cb68-227"></a>      <span class="co"># remove trailing dot from month names (Jan. -&gt; Jan)</span></span>
<span id="cb68-228"><a href="#cb68-228"></a>      <span class="at">month    =</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, month),</span>
<span id="cb68-229"><a href="#cb68-229"></a>      <span class="at">original =</span> <span class="fu">parse_number</span>(original),</span>
<span id="cb68-230"><a href="#cb68-230"></a>      <span class="at">final    =</span> <span class="fu">parse_number</span>(final),</span>
<span id="cb68-231"><a href="#cb68-231"></a>      <span class="at">revision =</span> final <span class="sc">-</span> original,</span>
<span id="cb68-232"><a href="#cb68-232"></a>      <span class="co"># "1979 Jan" -&gt; 1979-01-01</span></span>
<span id="cb68-233"><a href="#cb68-233"></a>      <span class="at">date     =</span> <span class="fu">ym</span>(<span class="fu">paste</span>(year, month))</span>
<span id="cb68-234"><a href="#cb68-234"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb68-235"><a href="#cb68-235"></a>    <span class="fu">select</span>(date, original, final, revision)</span>
<span id="cb68-236"><a href="#cb68-236"></a></span>
<span id="cb68-237"><a href="#cb68-237"></a>  tbl_clean</span>
<span id="cb68-238"><a href="#cb68-238"></a>}</span>
<span id="cb68-239"><a href="#cb68-239"></a></span>
<span id="cb68-240"><a href="#cb68-240"></a><span class="co"># test on 2024 like the instructions suggest</span></span>
<span id="cb68-241"><a href="#cb68-241"></a>revisions_2024 <span class="ot">&lt;-</span> <span class="fu">extract_revisions_year</span>(<span class="dv">2024</span>)</span>
<span id="cb68-242"><a href="#cb68-242"></a>revisions_2024</span>
<span id="cb68-243"><a href="#cb68-243"></a><span class="in">```</span></span>
<span id="cb68-244"><a href="#cb68-244"></a></span>
<span id="cb68-245"><a href="#cb68-245"></a><span class="fu">### Task 2.3: Combine years into a single data frame</span></span>
<span id="cb68-246"><a href="#cb68-246"></a></span>
<span id="cb68-249"><a href="#cb68-249"></a><span class="in">```{r}</span></span>
<span id="cb68-250"><a href="#cb68-250"></a>years <span class="ot">&lt;-</span> <span class="dv">1979</span><span class="sc">:</span><span class="dv">2025</span></span>
<span id="cb68-251"><a href="#cb68-251"></a></span>
<span id="cb68-252"><a href="#cb68-252"></a>ces_revisions <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(years, extract_revisions_year)</span>
<span id="cb68-253"><a href="#cb68-253"></a></span>
<span id="cb68-254"><a href="#cb68-254"></a><span class="co"># keep only through June 2025 as the instructions say</span></span>
<span id="cb68-255"><a href="#cb68-255"></a>ces_revisions <span class="ot">&lt;-</span> ces_revisions <span class="sc">|&gt;</span></span>
<span id="cb68-256"><a href="#cb68-256"></a>  <span class="fu">filter</span>(date <span class="sc">&lt;=</span> <span class="fu">ymd</span>(<span class="st">"2025-06-01"</span>),</span>
<span id="cb68-257"><a href="#cb68-257"></a>         <span class="sc">!</span><span class="fu">is.na</span>(original),</span>
<span id="cb68-258"><a href="#cb68-258"></a>         <span class="sc">!</span><span class="fu">is.na</span>(final))</span>
<span id="cb68-259"><a href="#cb68-259"></a></span>
<span id="cb68-260"><a href="#cb68-260"></a><span class="fu">head</span>(ces_revisions)</span>
<span id="cb68-261"><a href="#cb68-261"></a><span class="fu">tail</span>(ces_revisions)</span>
<span id="cb68-262"><a href="#cb68-262"></a><span class="in">```</span></span>
<span id="cb68-263"><a href="#cb68-263"></a></span>
<span id="cb68-264"><a href="#cb68-264"></a><span class="fu">## Task 3: Data Integration and Exploration</span></span>
<span id="cb68-265"><a href="#cb68-265"></a></span>
<span id="cb68-266"><a href="#cb68-266"></a><span class="fu">### Join the tables + create derived variables</span></span>
<span id="cb68-267"><a href="#cb68-267"></a></span>
<span id="cb68-270"><a href="#cb68-270"></a><span class="in">```{r}</span></span>
<span id="cb68-271"><a href="#cb68-271"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb68-272"><a href="#cb68-272"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb68-273"><a href="#cb68-273"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb68-274"><a href="#cb68-274"></a><span class="fu">library</span>(infer)</span>
<span id="cb68-275"><a href="#cb68-275"></a></span>
<span id="cb68-276"><a href="#cb68-276"></a><span class="co"># Join level and revision data</span></span>
<span id="cb68-277"><a href="#cb68-277"></a>ces_joined <span class="ot">&lt;-</span> ces_monthly <span class="sc">|&gt;</span></span>
<span id="cb68-278"><a href="#cb68-278"></a>  <span class="fu">left_join</span>(ces_revisions, <span class="at">by =</span> <span class="st">"date"</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-279"><a href="#cb68-279"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-280"><a href="#cb68-280"></a>    <span class="at">year              =</span> <span class="fu">year</span>(date),</span>
<span id="cb68-281"><a href="#cb68-281"></a>    <span class="at">month_num         =</span> <span class="fu">month</span>(date),</span>
<span id="cb68-282"><a href="#cb68-282"></a>    <span class="at">month_name        =</span> <span class="fu">month</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-283"><a href="#cb68-283"></a>    <span class="at">abs_revision      =</span> <span class="fu">abs</span>(revision),</span>
<span id="cb68-284"><a href="#cb68-284"></a>    <span class="at">rel_revision_pct  =</span> revision <span class="sc">/</span> level <span class="sc">*</span> <span class="dv">100</span>,          <span class="co"># revision as % of level</span></span>
<span id="cb68-285"><a href="#cb68-285"></a>    <span class="at">abs_rel_rev_pct   =</span> <span class="fu">abs</span>(revision) <span class="sc">/</span> level <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb68-286"><a href="#cb68-286"></a>    <span class="at">decade            =</span> <span class="fu">floor</span>(year <span class="sc">/</span> <span class="dv">10</span>) <span class="sc">*</span> <span class="dv">10</span>            <span class="co"># 1970s, 1980s, etc.</span></span>
<span id="cb68-287"><a href="#cb68-287"></a>  )</span>
<span id="cb68-288"><a href="#cb68-288"></a></span>
<span id="cb68-289"><a href="#cb68-289"></a><span class="fu">glimpse</span>(ces_joined)</span>
<span id="cb68-290"><a href="#cb68-290"></a><span class="in">```</span></span>
<span id="cb68-291"><a href="#cb68-291"></a></span>
<span id="cb68-294"><a href="#cb68-294"></a><span class="in">```{r}</span></span>
<span id="cb68-295"><a href="#cb68-295"></a><span class="co"># Extra variables for inference</span></span>
<span id="cb68-296"><a href="#cb68-296"></a>ces_inf <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-297"><a href="#cb68-297"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-298"><a href="#cb68-298"></a>    <span class="at">is_negative   =</span> revision <span class="sc">&lt;</span> <span class="dv">0</span>,</span>
<span id="cb68-299"><a href="#cb68-299"></a>    <span class="at">large_gt1pct  =</span> abs_rel_rev_pct <span class="sc">&gt;</span> <span class="dv">1</span>,</span>
<span id="cb68-300"><a href="#cb68-300"></a>    <span class="at">period_2000   =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"pre_2000"</span>, <span class="st">"post_2000"</span>),</span>
<span id="cb68-301"><a href="#cb68-301"></a>    <span class="at">period_2020   =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2020</span>, <span class="st">"pre_2020"</span>, <span class="st">"post_2020"</span>)</span>
<span id="cb68-302"><a href="#cb68-302"></a>  )</span>
<span id="cb68-303"><a href="#cb68-303"></a></span>
<span id="cb68-304"><a href="#cb68-304"></a><span class="fu">glimpse</span>(ces_inf)</span>
<span id="cb68-305"><a href="#cb68-305"></a><span class="in">```</span></span>
<span id="cb68-306"><a href="#cb68-306"></a></span>
<span id="cb68-307"><a href="#cb68-307"></a></span>
<span id="cb68-308"><a href="#cb68-308"></a><span class="fu">### Example summary statistics (6+ stats)</span></span>
<span id="cb68-309"><a href="#cb68-309"></a></span>
<span id="cb68-310"><a href="#cb68-310"></a><span class="fu">#### Overall summaries</span></span>
<span id="cb68-311"><a href="#cb68-311"></a></span>
<span id="cb68-314"><a href="#cb68-314"></a><span class="in">```{r}</span></span>
<span id="cb68-315"><a href="#cb68-315"></a>overall_stats <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-316"><a href="#cb68-316"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-317"><a href="#cb68-317"></a>    <span class="at">n_months           =</span> <span class="fu">n</span>(),</span>
<span id="cb68-318"><a href="#cb68-318"></a>    <span class="at">first_date         =</span> <span class="fu">min</span>(date),</span>
<span id="cb68-319"><a href="#cb68-319"></a>    <span class="at">last_date          =</span> <span class="fu">max</span>(date),</span>
<span id="cb68-320"><a href="#cb68-320"></a>    <span class="at">mean_level         =</span> <span class="fu">mean</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-321"><a href="#cb68-321"></a>    <span class="at">sd_level           =</span> <span class="fu">sd</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-322"><a href="#cb68-322"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-323"><a href="#cb68-323"></a>    <span class="at">max_up_revision    =</span> <span class="fu">max</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-324"><a href="#cb68-324"></a>    <span class="at">max_down_revision  =</span> <span class="fu">min</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-325"><a href="#cb68-325"></a>    <span class="at">mean_abs_rel_rev   =</span> <span class="fu">mean</span>(abs_rel_rev_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-326"><a href="#cb68-326"></a>  )</span>
<span id="cb68-327"><a href="#cb68-327"></a></span>
<span id="cb68-328"><a href="#cb68-328"></a>overall_stats</span>
<span id="cb68-329"><a href="#cb68-329"></a><span class="in">```</span></span>
<span id="cb68-330"><a href="#cb68-330"></a></span>
<span id="cb68-331"><a href="#cb68-331"></a><span class="fu">#### By decade </span></span>
<span id="cb68-332"><a href="#cb68-332"></a></span>
<span id="cb68-335"><a href="#cb68-335"></a><span class="in">```{r}</span></span>
<span id="cb68-336"><a href="#cb68-336"></a>decade_stats <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-337"><a href="#cb68-337"></a>  <span class="fu">group_by</span>(decade) <span class="sc">|&gt;</span></span>
<span id="cb68-338"><a href="#cb68-338"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-339"><a href="#cb68-339"></a>    <span class="at">mean_level        =</span> <span class="fu">mean</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-340"><a href="#cb68-340"></a>    <span class="at">mean_abs_revision =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-341"><a href="#cb68-341"></a>    <span class="at">frac_positive_rev =</span> <span class="fu">mean</span>(revision <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-342"><a href="#cb68-342"></a>  )</span>
<span id="cb68-343"><a href="#cb68-343"></a></span>
<span id="cb68-344"><a href="#cb68-344"></a>decade_stats</span>
<span id="cb68-345"><a href="#cb68-345"></a><span class="in">```</span></span>
<span id="cb68-346"><a href="#cb68-346"></a></span>
<span id="cb68-347"><a href="#cb68-347"></a><span class="fu">#### By month-of-year (seasonal pattern in revisions)</span></span>
<span id="cb68-348"><a href="#cb68-348"></a></span>
<span id="cb68-351"><a href="#cb68-351"></a><span class="in">```{r}</span></span>
<span id="cb68-352"><a href="#cb68-352"></a>month_stats <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-353"><a href="#cb68-353"></a>  <span class="fu">group_by</span>(month_name) <span class="sc">|&gt;</span></span>
<span id="cb68-354"><a href="#cb68-354"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-355"><a href="#cb68-355"></a>    <span class="at">mean_abs_revision =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-356"><a href="#cb68-356"></a>    <span class="at">frac_positive_rev =</span> <span class="fu">mean</span>(revision <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-357"><a href="#cb68-357"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-358"><a href="#cb68-358"></a>  <span class="fu">arrange</span>(month_name)</span>
<span id="cb68-359"><a href="#cb68-359"></a></span>
<span id="cb68-360"><a href="#cb68-360"></a>month_stats</span>
<span id="cb68-361"><a href="#cb68-361"></a><span class="in">```</span></span>
<span id="cb68-362"><a href="#cb68-362"></a></span>
<span id="cb68-363"><a href="#cb68-363"></a><span class="fu">### Four ggplot visualizations</span></span>
<span id="cb68-364"><a href="#cb68-364"></a></span>
<span id="cb68-365"><a href="#cb68-365"></a><span class="fu">#### Plot 1 – CES level over time</span></span>
<span id="cb68-366"><a href="#cb68-366"></a></span>
<span id="cb68-369"><a href="#cb68-369"></a><span class="in">```{r}</span></span>
<span id="cb68-370"><a href="#cb68-370"></a><span class="fu">ggplot</span>(ces_joined, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> level)) <span class="sc">+</span></span>
<span id="cb68-371"><a href="#cb68-371"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb68-372"><a href="#cb68-372"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-373"><a href="#cb68-373"></a>    <span class="at">title =</span> <span class="st">"Total Nonfarm Payroll Employment (Seasonally Adjusted)"</span>,</span>
<span id="cb68-374"><a href="#cb68-374"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb68-375"><a href="#cb68-375"></a>    <span class="at">y =</span> <span class="st">"Employment Level (thousands)"</span></span>
<span id="cb68-376"><a href="#cb68-376"></a>  )</span>
<span id="cb68-377"><a href="#cb68-377"></a><span class="in">```</span></span>
<span id="cb68-378"><a href="#cb68-378"></a></span>
<span id="cb68-379"><a href="#cb68-379"></a><span class="fu">#### Plot 2 – Revisions over time</span></span>
<span id="cb68-380"><a href="#cb68-380"></a></span>
<span id="cb68-383"><a href="#cb68-383"></a><span class="in">```{r}</span></span>
<span id="cb68-384"><a href="#cb68-384"></a><span class="fu">ggplot</span>(ces_joined, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> revision)) <span class="sc">+</span></span>
<span id="cb68-385"><a href="#cb68-385"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb68-386"><a href="#cb68-386"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb68-387"><a href="#cb68-387"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-388"><a href="#cb68-388"></a>    <span class="at">title =</span> <span class="st">"CES Revisions Over Time (1st vs 3rd Estimate)"</span>,</span>
<span id="cb68-389"><a href="#cb68-389"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb68-390"><a href="#cb68-390"></a>    <span class="at">y =</span> <span class="st">"Revision (final − original, thousands)"</span></span>
<span id="cb68-391"><a href="#cb68-391"></a>  )</span>
<span id="cb68-392"><a href="#cb68-392"></a><span class="in">```</span></span>
<span id="cb68-393"><a href="#cb68-393"></a></span>
<span id="cb68-394"><a href="#cb68-394"></a><span class="fu">#### Plot 3 – Distribution of revisions</span></span>
<span id="cb68-395"><a href="#cb68-395"></a></span>
<span id="cb68-398"><a href="#cb68-398"></a><span class="in">```{r}</span></span>
<span id="cb68-399"><a href="#cb68-399"></a><span class="fu">ggplot</span>(ces_joined, <span class="fu">aes</span>(<span class="at">x =</span> revision)) <span class="sc">+</span></span>
<span id="cb68-400"><a href="#cb68-400"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">boundary =</span> <span class="dv">0</span>, <span class="at">closed =</span> <span class="st">"left"</span>) <span class="sc">+</span></span>
<span id="cb68-401"><a href="#cb68-401"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb68-402"><a href="#cb68-402"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-403"><a href="#cb68-403"></a>    <span class="at">title =</span> <span class="st">"Distribution of Monthly CES Revisions"</span>,</span>
<span id="cb68-404"><a href="#cb68-404"></a>    <span class="at">x =</span> <span class="st">"Revision (thousands)"</span>,</span>
<span id="cb68-405"><a href="#cb68-405"></a>    <span class="at">y =</span> <span class="st">"Count of Months"</span></span>
<span id="cb68-406"><a href="#cb68-406"></a>  )</span>
<span id="cb68-407"><a href="#cb68-407"></a><span class="in">```</span></span>
<span id="cb68-408"><a href="#cb68-408"></a></span>
<span id="cb68-409"><a href="#cb68-409"></a><span class="fu">#### Plot 4 – Average absolute revision by decade</span></span>
<span id="cb68-410"><a href="#cb68-410"></a></span>
<span id="cb68-413"><a href="#cb68-413"></a><span class="in">```{r}</span></span>
<span id="cb68-414"><a href="#cb68-414"></a><span class="fu">ggplot</span>(decade_stats, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(decade), <span class="at">y =</span> mean_abs_revision)) <span class="sc">+</span></span>
<span id="cb68-415"><a href="#cb68-415"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb68-416"><a href="#cb68-416"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-417"><a href="#cb68-417"></a>    <span class="at">title =</span> <span class="st">"Average Absolute CES Revision by Decade"</span>,</span>
<span id="cb68-418"><a href="#cb68-418"></a>    <span class="at">x =</span> <span class="st">"Decade"</span>,</span>
<span id="cb68-419"><a href="#cb68-419"></a>    <span class="at">y =</span> <span class="st">"Mean |Revision| (thousands)"</span></span>
<span id="cb68-420"><a href="#cb68-420"></a>  )</span>
<span id="cb68-421"><a href="#cb68-421"></a><span class="in">```</span></span>
<span id="cb68-422"><a href="#cb68-422"></a></span>
<span id="cb68-423"><a href="#cb68-423"></a><span class="fu">### Statistical Analysis with 'infer'</span></span>
<span id="cb68-424"><a href="#cb68-424"></a></span>
<span id="cb68-425"><a href="#cb68-425"></a><span class="fu">#### Two-sample t-test (using ''t_test')</span></span>
<span id="cb68-426"><a href="#cb68-426"></a></span>
<span id="cb68-429"><a href="#cb68-429"></a><span class="in">```{r}</span></span>
<span id="cb68-430"><a href="#cb68-430"></a>ces_decades_test <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-431"><a href="#cb68-431"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">1980</span>, year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-432"><a href="#cb68-432"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-433"><a href="#cb68-433"></a>    <span class="at">period =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"1980s_1990s"</span>, <span class="st">"2000s_2010s"</span>),</span>
<span id="cb68-434"><a href="#cb68-434"></a>    <span class="at">abs_rev =</span> abs_revision</span>
<span id="cb68-435"><a href="#cb68-435"></a>  )</span>
<span id="cb68-436"><a href="#cb68-436"></a></span>
<span id="cb68-437"><a href="#cb68-437"></a>ces_t_test <span class="ot">&lt;-</span> ces_decades_test <span class="sc">|&gt;</span></span>
<span id="cb68-438"><a href="#cb68-438"></a>  <span class="fu">t_test</span>(abs_rev <span class="sc">~</span> period,</span>
<span id="cb68-439"><a href="#cb68-439"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"1980s_1990s"</span>, <span class="st">"2000s_2010s"</span>))</span>
<span id="cb68-440"><a href="#cb68-440"></a></span>
<span id="cb68-441"><a href="#cb68-441"></a>ces_t_test</span>
<span id="cb68-442"><a href="#cb68-442"></a><span class="in">```</span></span>
<span id="cb68-443"><a href="#cb68-443"></a></span>
<span id="cb68-444"><a href="#cb68-444"></a><span class="fu">#### Proportion test (using 'prop_test')</span></span>
<span id="cb68-445"><a href="#cb68-445"></a></span>
<span id="cb68-448"><a href="#cb68-448"></a><span class="in">```{r}</span></span>
<span id="cb68-449"><a href="#cb68-449"></a>ces_prop_data <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-450"><a href="#cb68-450"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">1980</span>, year <span class="sc">&lt;=</span> <span class="dv">2024</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-451"><a href="#cb68-451"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-452"><a href="#cb68-452"></a>    <span class="at">positive =</span> revision <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb68-453"><a href="#cb68-453"></a>    <span class="at">period   =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"pre_2000"</span>, <span class="st">"post_2000"</span>)</span>
<span id="cb68-454"><a href="#cb68-454"></a>  )</span>
<span id="cb68-455"><a href="#cb68-455"></a></span>
<span id="cb68-456"><a href="#cb68-456"></a>ces_prop_test <span class="ot">&lt;-</span> ces_prop_data <span class="sc">|&gt;</span></span>
<span id="cb68-457"><a href="#cb68-457"></a>  <span class="fu">prop_test</span>(positive <span class="sc">~</span> period,</span>
<span id="cb68-458"><a href="#cb68-458"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_2000"</span>, <span class="st">"pre_2000"</span>))</span>
<span id="cb68-459"><a href="#cb68-459"></a></span>
<span id="cb68-460"><a href="#cb68-460"></a>ces_prop_test</span>
<span id="cb68-461"><a href="#cb68-461"></a><span class="in">```</span></span>
<span id="cb68-462"><a href="#cb68-462"></a></span>
<span id="cb68-463"><a href="#cb68-463"></a><span class="fu">## Task 4 Statistical Inference</span></span>
<span id="cb68-464"><a href="#cb68-464"></a></span>
<span id="cb68-465"><a href="#cb68-465"></a><span class="fu">### Test 1 – Has the fraction of negative revisions increased post-2000?</span></span>
<span id="cb68-466"><a href="#cb68-466"></a></span>
<span id="cb68-469"><a href="#cb68-469"></a><span class="in">```{r}</span></span>
<span id="cb68-470"><a href="#cb68-470"></a><span class="co"># Task 4, Test 1: fraction of negative revisions pre- vs post-2000</span></span>
<span id="cb68-471"><a href="#cb68-471"></a>neg_prop_test <span class="ot">&lt;-</span> ces_inf <span class="sc">|&gt;</span></span>
<span id="cb68-472"><a href="#cb68-472"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(is_negative)) <span class="sc">|&gt;</span></span>
<span id="cb68-473"><a href="#cb68-473"></a>  <span class="fu">prop_test</span>(is_negative <span class="sc">~</span> period_2000,</span>
<span id="cb68-474"><a href="#cb68-474"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_2000"</span>, <span class="st">"pre_2000"</span>))</span>
<span id="cb68-475"><a href="#cb68-475"></a></span>
<span id="cb68-476"><a href="#cb68-476"></a>neg_prop_test</span>
<span id="cb68-477"><a href="#cb68-477"></a><span class="in">```</span></span>
<span id="cb68-478"><a href="#cb68-478"></a></span>
<span id="cb68-479"><a href="#cb68-479"></a>A two-sample proportion test comparing pre-2000 vs post-2000 negative revisions gave a p-value of 0.435 with a 95% CI for the difference of <span class="co">[</span><span class="ot">-0.05, 0.12</span><span class="co">]</span>. Since the interval includes 0 and the p-value is large, we fail to reject the null hypothesis. There is no clear evidence that the fraction of negative CES revisions changed after 2000.</span>
<span id="cb68-480"><a href="#cb68-480"></a></span>
<span id="cb68-481"><a href="#cb68-481"></a><span class="fu">### Test 2 – Has the average revision changed post-2020?</span></span>
<span id="cb68-482"><a href="#cb68-482"></a></span>
<span id="cb68-485"><a href="#cb68-485"></a><span class="in">```{r}</span></span>
<span id="cb68-486"><a href="#cb68-486"></a><span class="co"># Task 4, Test 2: average revision pre- vs post-2020</span></span>
<span id="cb68-487"><a href="#cb68-487"></a>rev_t_test <span class="ot">&lt;-</span> ces_inf <span class="sc">|&gt;</span></span>
<span id="cb68-488"><a href="#cb68-488"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb68-489"><a href="#cb68-489"></a>  <span class="fu">t_test</span>(revision <span class="sc">~</span> period_2020,</span>
<span id="cb68-490"><a href="#cb68-490"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_2020"</span>, <span class="st">"pre_2020"</span>))</span>
<span id="cb68-491"><a href="#cb68-491"></a></span>
<span id="cb68-492"><a href="#cb68-492"></a>rev_t_test</span>
<span id="cb68-493"><a href="#cb68-493"></a><span class="in">```</span></span>
<span id="cb68-494"><a href="#cb68-494"></a></span>
<span id="cb68-495"><a href="#cb68-495"></a>A two-sample t-test comparing mean revisions pre-2020 vs post-2020 yielded an estimated difference of -12.5 thousand jobs (post-2020 minus pre-2020), with a 95% CI of <span class="co">[</span><span class="ot">-48.1, 23.0</span><span class="co">]</span> and a p-value of 0.485. Again, the interval spans 0 and the p-value is well above 0.05, so we fail to reject the null hypothesis. The data do not provide strong evidence that the average CES revision changed after 2020.</span>
<span id="cb68-496"><a href="#cb68-496"></a></span>
<span id="cb68-497"><a href="#cb68-497"></a><span class="fu">## Task 5 – Fact Checks of Claims about BLS </span></span>
<span id="cb68-498"><a href="#cb68-498"></a></span>
<span id="cb68-501"><a href="#cb68-501"></a><span class="in">```{r}</span></span>
<span id="cb68-502"><a href="#cb68-502"></a><span class="co"># Add president/party labels and periods</span></span>
<span id="cb68-503"><a href="#cb68-503"></a>presidents_party <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">expand_grid</span>(</span>
<span id="cb68-504"><a href="#cb68-504"></a>  <span class="at">year  =</span> <span class="dv">1979</span><span class="sc">:</span><span class="dv">2025</span>,</span>
<span id="cb68-505"><a href="#cb68-505"></a>  <span class="at">month =</span> month.name,</span>
<span id="cb68-506"><a href="#cb68-506"></a>  <span class="at">president =</span> <span class="cn">NA_character_</span>,</span>
<span id="cb68-507"><a href="#cb68-507"></a>  <span class="at">party     =</span> <span class="cn">NA_character_</span></span>
<span id="cb68-508"><a href="#cb68-508"></a>) <span class="sc">|&gt;</span></span>
<span id="cb68-509"><a href="#cb68-509"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-510"><a href="#cb68-510"></a>    <span class="at">president =</span> <span class="fu">case_when</span>(</span>
<span id="cb68-511"><a href="#cb68-511"></a>      (month <span class="sc">==</span> <span class="st">"January"</span>)  <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1979</span>) <span class="sc">~</span> <span class="st">"Carter"</span>,</span>
<span id="cb68-512"><a href="#cb68-512"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1981</span>) <span class="sc">~</span> <span class="st">"Reagan"</span>,</span>
<span id="cb68-513"><a href="#cb68-513"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1989</span>) <span class="sc">~</span> <span class="st">"Bush 41"</span>,</span>
<span id="cb68-514"><a href="#cb68-514"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">1993</span>) <span class="sc">~</span> <span class="st">"Clinton"</span>,</span>
<span id="cb68-515"><a href="#cb68-515"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2001</span>) <span class="sc">~</span> <span class="st">"Bush 43"</span>,</span>
<span id="cb68-516"><a href="#cb68-516"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">~</span> <span class="st">"Obama"</span>,</span>
<span id="cb68-517"><a href="#cb68-517"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">~</span> <span class="st">"Trump"</span>,</span>
<span id="cb68-518"><a href="#cb68-518"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">~</span> <span class="st">"Biden"</span>,</span>
<span id="cb68-519"><a href="#cb68-519"></a>      (month <span class="sc">==</span> <span class="st">"February"</span>) <span class="sc">&amp;</span> (year <span class="sc">==</span> <span class="dv">2025</span>) <span class="sc">~</span> <span class="st">"Trump II"</span>,</span>
<span id="cb68-520"><a href="#cb68-520"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb68-521"><a href="#cb68-521"></a>    )</span>
<span id="cb68-522"><a href="#cb68-522"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-523"><a href="#cb68-523"></a>  tidyr<span class="sc">::</span><span class="fu">fill</span>(president) <span class="sc">|&gt;</span></span>
<span id="cb68-524"><a href="#cb68-524"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-525"><a href="#cb68-525"></a>    <span class="at">party =</span> <span class="fu">if_else</span>(president <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Carter"</span>, <span class="st">"Clinton"</span>, <span class="st">"Obama"</span>, <span class="st">"Biden"</span>),</span>
<span id="cb68-526"><a href="#cb68-526"></a>                    <span class="st">"D"</span>, <span class="st">"R"</span>)</span>
<span id="cb68-527"><a href="#cb68-527"></a>  )</span>
<span id="cb68-528"><a href="#cb68-528"></a></span>
<span id="cb68-529"><a href="#cb68-529"></a>ces_pres <span class="ot">&lt;-</span> ces_joined <span class="sc">|&gt;</span></span>
<span id="cb68-530"><a href="#cb68-530"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-531"><a href="#cb68-531"></a>    <span class="at">month_full      =</span> <span class="fu">month</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb68-532"><a href="#cb68-532"></a>    <span class="at">period_election =</span> <span class="fu">if_else</span>(date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-11-01"</span>),</span>
<span id="cb68-533"><a href="#cb68-533"></a>                              <span class="st">"post_election"</span>, <span class="st">"pre_election"</span>),</span>
<span id="cb68-534"><a href="#cb68-534"></a>    <span class="at">period_2020     =</span> <span class="fu">if_else</span>(year <span class="sc">&gt;=</span> <span class="dv">2020</span>, <span class="st">"post_2020"</span>, <span class="st">"pre_2020"</span>)</span>
<span id="cb68-535"><a href="#cb68-535"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb68-536"><a href="#cb68-536"></a>  <span class="co"># join to add president/party</span></span>
<span id="cb68-537"><a href="#cb68-537"></a>  <span class="fu">left_join</span>(presidents_party,</span>
<span id="cb68-538"><a href="#cb68-538"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month_full"</span> <span class="ot">=</span> <span class="st">"month"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb68-539"><a href="#cb68-539"></a>  <span class="co"># now 'president' exists, so we can define biden_term</span></span>
<span id="cb68-540"><a href="#cb68-540"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-541"><a href="#cb68-541"></a>    <span class="at">biden_term =</span> <span class="fu">if_else</span>(president <span class="sc">==</span> <span class="st">"Biden"</span>, <span class="st">"Biden"</span>, <span class="st">"Other"</span>)</span>
<span id="cb68-542"><a href="#cb68-542"></a>  )</span>
<span id="cb68-543"><a href="#cb68-543"></a><span class="in">```</span></span>
<span id="cb68-544"><a href="#cb68-544"></a></span>
<span id="cb68-545"><a href="#cb68-545"></a><span class="fu">### Claim 1 (Trump): “Bureau of Labor Statistics employment numbers were rigged when the agency revised them down by almost 900,000 jobs after the 2024 election.”</span></span>
<span id="cb68-546"><a href="#cb68-546"></a></span>
<span id="cb68-547"><a href="#cb68-547"></a><span class="fu">#### Descriptive Stats</span></span>
<span id="cb68-548"><a href="#cb68-548"></a></span>
<span id="cb68-551"><a href="#cb68-551"></a><span class="in">```{r}</span></span>
<span id="cb68-552"><a href="#cb68-552"></a><span class="co"># Stats: largest downward revision and its date</span></span>
<span id="cb68-553"><a href="#cb68-553"></a>biggest_down <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-554"><a href="#cb68-554"></a>  <span class="fu">arrange</span>(revision) <span class="sc">|&gt;</span></span>
<span id="cb68-555"><a href="#cb68-555"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb68-556"><a href="#cb68-556"></a></span>
<span id="cb68-557"><a href="#cb68-557"></a>biggest_down</span>
<span id="cb68-558"><a href="#cb68-558"></a></span>
<span id="cb68-559"><a href="#cb68-559"></a><span class="co"># Stats: sum of revisions after Nov 2024</span></span>
<span id="cb68-560"><a href="#cb68-560"></a>post_election_window <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-561"><a href="#cb68-561"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-11-01"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb68-562"><a href="#cb68-562"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-563"><a href="#cb68-563"></a>    <span class="at">n_months        =</span> <span class="fu">n</span>(),</span>
<span id="cb68-564"><a href="#cb68-564"></a>    <span class="at">total_revision  =</span> <span class="fu">sum</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-565"><a href="#cb68-565"></a>    <span class="at">mean_revision   =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-566"><a href="#cb68-566"></a>    <span class="at">mean_level      =</span> <span class="fu">mean</span>(level, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-567"><a href="#cb68-567"></a>    <span class="at">total_jobs_rev  =</span> total_revision <span class="sc">*</span> <span class="dv">1000</span>  <span class="co"># convert "thousands" to jobs</span></span>
<span id="cb68-568"><a href="#cb68-568"></a>  )</span>
<span id="cb68-569"><a href="#cb68-569"></a></span>
<span id="cb68-570"><a href="#cb68-570"></a>post_election_window</span>
<span id="cb68-571"><a href="#cb68-571"></a></span>
<span id="cb68-572"><a href="#cb68-572"></a><span class="co"># Compare pre- vs post-election average revisions</span></span>
<span id="cb68-573"><a href="#cb68-573"></a>election_stats <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-574"><a href="#cb68-574"></a>  <span class="fu">group_by</span>(period_election) <span class="sc">|&gt;</span></span>
<span id="cb68-575"><a href="#cb68-575"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-576"><a href="#cb68-576"></a>    <span class="at">mean_revision      =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-577"><a href="#cb68-577"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-578"><a href="#cb68-578"></a>    <span class="at">frac_negative      =</span> <span class="fu">mean</span>(revision <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-579"><a href="#cb68-579"></a>  )</span>
<span id="cb68-580"><a href="#cb68-580"></a></span>
<span id="cb68-581"><a href="#cb68-581"></a>election_stats</span>
<span id="cb68-582"><a href="#cb68-582"></a><span class="in">```</span></span>
<span id="cb68-583"><a href="#cb68-583"></a></span>
<span id="cb68-584"><a href="#cb68-584"></a><span class="fu">#### Hypothesis Test </span></span>
<span id="cb68-585"><a href="#cb68-585"></a></span>
<span id="cb68-586"><a href="#cb68-586"></a><span class="fu">##### Two-Sample T-Test</span></span>
<span id="cb68-587"><a href="#cb68-587"></a></span>
<span id="cb68-590"><a href="#cb68-590"></a><span class="in">```{r}</span></span>
<span id="cb68-591"><a href="#cb68-591"></a>claim1_ttest <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-592"><a href="#cb68-592"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb68-593"><a href="#cb68-593"></a>  <span class="fu">t_test</span>(revision <span class="sc">~</span> period_election,</span>
<span id="cb68-594"><a href="#cb68-594"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_election"</span>, <span class="st">"pre_election"</span>))</span>
<span id="cb68-595"><a href="#cb68-595"></a></span>
<span id="cb68-596"><a href="#cb68-596"></a>claim1_ttest</span>
<span id="cb68-597"><a href="#cb68-597"></a><span class="in">```</span></span>
<span id="cb68-598"><a href="#cb68-598"></a></span>
<span id="cb68-599"><a href="#cb68-599"></a><span class="fu">##### Proportion Test</span></span>
<span id="cb68-600"><a href="#cb68-600"></a></span>
<span id="cb68-603"><a href="#cb68-603"></a><span class="in">```{r}</span></span>
<span id="cb68-604"><a href="#cb68-604"></a>claim1_prop <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-605"><a href="#cb68-605"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb68-606"><a href="#cb68-606"></a>  <span class="fu">mutate</span>(<span class="at">is_negative =</span> revision <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-607"><a href="#cb68-607"></a>  <span class="fu">prop_test</span>(is_negative <span class="sc">~</span> period_election,</span>
<span id="cb68-608"><a href="#cb68-608"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"post_election"</span>, <span class="st">"pre_election"</span>))</span>
<span id="cb68-609"><a href="#cb68-609"></a></span>
<span id="cb68-610"><a href="#cb68-610"></a>claim1_prop</span>
<span id="cb68-611"><a href="#cb68-611"></a><span class="in">```</span></span>
<span id="cb68-612"><a href="#cb68-612"></a></span>
<span id="cb68-613"><a href="#cb68-613"></a><span class="fu">#### Visualizations </span></span>
<span id="cb68-614"><a href="#cb68-614"></a></span>
<span id="cb68-615"><a href="#cb68-615"></a><span class="fu">##### Revisions over time with election line</span></span>
<span id="cb68-616"><a href="#cb68-616"></a></span>
<span id="cb68-619"><a href="#cb68-619"></a><span class="in">```{r}</span></span>
<span id="cb68-620"><a href="#cb68-620"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> revision)) <span class="sc">+</span></span>
<span id="cb68-621"><a href="#cb68-621"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb68-622"><a href="#cb68-622"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb68-623"><a href="#cb68-623"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">as.Date</span>(<span class="st">"2024-11-01"</span>),</span>
<span id="cb68-624"><a href="#cb68-624"></a>             <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>) <span class="sc">+</span></span>
<span id="cb68-625"><a href="#cb68-625"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-626"><a href="#cb68-626"></a>    <span class="at">title =</span> <span class="st">"CES Revisions Over Time with 2024 Election Marker"</span>,</span>
<span id="cb68-627"><a href="#cb68-627"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb68-628"><a href="#cb68-628"></a>    <span class="at">y =</span> <span class="st">"Revision (thousands of jobs)"</span></span>
<span id="cb68-629"><a href="#cb68-629"></a>  )</span>
<span id="cb68-630"><a href="#cb68-630"></a><span class="in">```</span></span>
<span id="cb68-631"><a href="#cb68-631"></a></span>
<span id="cb68-632"><a href="#cb68-632"></a><span class="fu">##### Boxplot pre vs post election</span></span>
<span id="cb68-633"><a href="#cb68-633"></a></span>
<span id="cb68-636"><a href="#cb68-636"></a><span class="in">```{r}</span></span>
<span id="cb68-637"><a href="#cb68-637"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> period_election, <span class="at">y =</span> revision)) <span class="sc">+</span></span>
<span id="cb68-638"><a href="#cb68-638"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb68-639"><a href="#cb68-639"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-640"><a href="#cb68-640"></a>    <span class="at">title =</span> <span class="st">"Distribution of CES Revisions Pre- and Post-2024 Election"</span>,</span>
<span id="cb68-641"><a href="#cb68-641"></a>    <span class="at">x =</span> <span class="st">"Period"</span>,</span>
<span id="cb68-642"><a href="#cb68-642"></a>    <span class="at">y =</span> <span class="st">"Revision (thousands of jobs)"</span></span>
<span id="cb68-643"><a href="#cb68-643"></a>  )</span>
<span id="cb68-644"><a href="#cb68-644"></a><span class="in">```</span></span>
<span id="cb68-645"><a href="#cb68-645"></a></span>
<span id="cb68-646"><a href="#cb68-646"></a>In the CES data from 1979–2025, the largest single-month downward revision is in March 2020, where employment was revised down by about 672,000 jobs, well before the 2024 election. In the eight months after November 2024, total revisions add up to about –387,000 jobs (around –48,000 per month) on an average employment level of 159 million, not a one-time 900,000 drop.</span>
<span id="cb68-647"><a href="#cb68-647"></a></span>
<span id="cb68-648"><a href="#cb68-648"></a>A two-sample t-test shows that mean revisions are more negative after the election (–48.4k vs +12.4k, difference –60.7k, p ≈ 0.036), but the change is on the order of tens of thousands of jobs, not hundreds of thousands. A proportion test for the share of negative revisions (42% before vs 75% after, p ≈ 0.13) gives no clear evidence of a dramatic shift. Taken together, the revision record does not support the idea of a special 900,000-job “rigging” after the election, so this claim would be rated Pants on Fire.</span>
<span id="cb68-649"><a href="#cb68-649"></a></span>
<span id="cb68-650"><a href="#cb68-650"></a><span class="fu">### Claim 2 (Trump): “The Harris-Biden Administration fraudulently manipulated job statistics and padded the numbers with an extra 818,000 jobs that do not exist, and never did.”</span></span>
<span id="cb68-651"><a href="#cb68-651"></a></span>
<span id="cb68-652"><a href="#cb68-652"></a><span class="fu">#### Descriptive stats by president / Biden vs others</span></span>
<span id="cb68-653"><a href="#cb68-653"></a></span>
<span id="cb68-656"><a href="#cb68-656"></a><span class="in">```{r}</span></span>
<span id="cb68-657"><a href="#cb68-657"></a><span class="co"># Compare Biden term to other presidents</span></span>
<span id="cb68-658"><a href="#cb68-658"></a>biden_stats <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-659"><a href="#cb68-659"></a>  <span class="fu">group_by</span>(biden_term) <span class="sc">|&gt;</span></span>
<span id="cb68-660"><a href="#cb68-660"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-661"><a href="#cb68-661"></a>    <span class="at">mean_revision      =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-662"><a href="#cb68-662"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-663"><a href="#cb68-663"></a>    <span class="at">mean_abs_rel_pct   =</span> <span class="fu">mean</span>(abs_rel_rev_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-664"><a href="#cb68-664"></a>    <span class="at">frac_negative      =</span> <span class="fu">mean</span>(revision <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-665"><a href="#cb68-665"></a>    <span class="at">n_months           =</span> <span class="fu">n</span>()</span>
<span id="cb68-666"><a href="#cb68-666"></a>  )</span>
<span id="cb68-667"><a href="#cb68-667"></a></span>
<span id="cb68-668"><a href="#cb68-668"></a>biden_stats</span>
<span id="cb68-669"><a href="#cb68-669"></a></span>
<span id="cb68-670"><a href="#cb68-670"></a><span class="co"># Optional: stats by president</span></span>
<span id="cb68-671"><a href="#cb68-671"></a>pres_stats <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-672"><a href="#cb68-672"></a>  <span class="fu">group_by</span>(president) <span class="sc">|&gt;</span></span>
<span id="cb68-673"><a href="#cb68-673"></a>  <span class="fu">summarise</span>(</span>
<span id="cb68-674"><a href="#cb68-674"></a>    <span class="at">mean_revision      =</span> <span class="fu">mean</span>(revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-675"><a href="#cb68-675"></a>    <span class="at">mean_abs_revision  =</span> <span class="fu">mean</span>(abs_revision, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-676"><a href="#cb68-676"></a>    <span class="at">mean_abs_rel_pct   =</span> <span class="fu">mean</span>(abs_rel_rev_pct, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-677"><a href="#cb68-677"></a>  )</span>
<span id="cb68-678"><a href="#cb68-678"></a></span>
<span id="cb68-679"><a href="#cb68-679"></a>pres_stats</span>
<span id="cb68-680"><a href="#cb68-680"></a><span class="in">```</span></span>
<span id="cb68-681"><a href="#cb68-681"></a></span>
<span id="cb68-682"><a href="#cb68-682"></a><span class="fu">#### Hypothesis test – Are revisions different in Biden’s term?</span></span>
<span id="cb68-683"><a href="#cb68-683"></a></span>
<span id="cb68-684"><a href="#cb68-684"></a><span class="fu">##### T-test</span></span>
<span id="cb68-685"><a href="#cb68-685"></a></span>
<span id="cb68-688"><a href="#cb68-688"></a><span class="in">```{r}</span></span>
<span id="cb68-689"><a href="#cb68-689"></a><span class="co"># Test difference in mean revision Biden vs other</span></span>
<span id="cb68-690"><a href="#cb68-690"></a>claim2_ttest_rev <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-691"><a href="#cb68-691"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(revision)) <span class="sc">|&gt;</span></span>
<span id="cb68-692"><a href="#cb68-692"></a>  <span class="fu">t_test</span>(revision <span class="sc">~</span> biden_term,</span>
<span id="cb68-693"><a href="#cb68-693"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"Biden"</span>, <span class="st">"Other"</span>))</span>
<span id="cb68-694"><a href="#cb68-694"></a></span>
<span id="cb68-695"><a href="#cb68-695"></a>claim2_ttest_rev</span>
<span id="cb68-696"><a href="#cb68-696"></a></span>
<span id="cb68-697"><a href="#cb68-697"></a><span class="co"># Test difference in mean absolute percent revision</span></span>
<span id="cb68-698"><a href="#cb68-698"></a>claim2_ttest_pct <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-699"><a href="#cb68-699"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(abs_rel_rev_pct)) <span class="sc">|&gt;</span></span>
<span id="cb68-700"><a href="#cb68-700"></a>  <span class="fu">t_test</span>(abs_rel_rev_pct <span class="sc">~</span> biden_term,</span>
<span id="cb68-701"><a href="#cb68-701"></a>         <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"Biden"</span>, <span class="st">"Other"</span>))</span>
<span id="cb68-702"><a href="#cb68-702"></a></span>
<span id="cb68-703"><a href="#cb68-703"></a>claim2_ttest_pct</span>
<span id="cb68-704"><a href="#cb68-704"></a><span class="in">```</span></span>
<span id="cb68-705"><a href="#cb68-705"></a></span>
<span id="cb68-706"><a href="#cb68-706"></a><span class="fu">##### Proportion Test</span></span>
<span id="cb68-707"><a href="#cb68-707"></a></span>
<span id="cb68-710"><a href="#cb68-710"></a><span class="in">```{r}</span></span>
<span id="cb68-711"><a href="#cb68-711"></a>claim2_prop <span class="ot">&lt;-</span> ces_pres <span class="sc">|&gt;</span></span>
<span id="cb68-712"><a href="#cb68-712"></a>  <span class="fu">mutate</span>(<span class="at">is_negative =</span> revision <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb68-713"><a href="#cb68-713"></a>  <span class="fu">prop_test</span>(is_negative <span class="sc">~</span> biden_term,</span>
<span id="cb68-714"><a href="#cb68-714"></a>            <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"Biden"</span>, <span class="st">"Other"</span>))</span>
<span id="cb68-715"><a href="#cb68-715"></a></span>
<span id="cb68-716"><a href="#cb68-716"></a>claim2_prop</span>
<span id="cb68-717"><a href="#cb68-717"></a><span class="in">```</span></span>
<span id="cb68-718"><a href="#cb68-718"></a></span>
<span id="cb68-719"><a href="#cb68-719"></a><span class="fu">#### Visualizations</span></span>
<span id="cb68-720"><a href="#cb68-720"></a></span>
<span id="cb68-721"><a href="#cb68-721"></a><span class="fu">##### Absolute revisions by president</span></span>
<span id="cb68-722"><a href="#cb68-722"></a></span>
<span id="cb68-725"><a href="#cb68-725"></a><span class="in">```{r}</span></span>
<span id="cb68-726"><a href="#cb68-726"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> president, <span class="at">y =</span> abs_revision)) <span class="sc">+</span></span>
<span id="cb68-727"><a href="#cb68-727"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb68-728"><a href="#cb68-728"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-729"><a href="#cb68-729"></a>    <span class="at">title =</span> <span class="st">"Absolute CES Revisions by President"</span>,</span>
<span id="cb68-730"><a href="#cb68-730"></a>    <span class="at">x =</span> <span class="st">"President"</span>,</span>
<span id="cb68-731"><a href="#cb68-731"></a>    <span class="at">y =</span> <span class="st">"|Revision| (thousands of jobs)"</span></span>
<span id="cb68-732"><a href="#cb68-732"></a>  ) <span class="sc">+</span></span>
<span id="cb68-733"><a href="#cb68-733"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb68-734"><a href="#cb68-734"></a><span class="in">```</span></span>
<span id="cb68-735"><a href="#cb68-735"></a></span>
<span id="cb68-736"><a href="#cb68-736"></a><span class="fu">##### |revision| as % of level: Biden vs others</span></span>
<span id="cb68-737"><a href="#cb68-737"></a></span>
<span id="cb68-740"><a href="#cb68-740"></a><span class="in">```{r}</span></span>
<span id="cb68-741"><a href="#cb68-741"></a><span class="fu">ggplot</span>(ces_pres, <span class="fu">aes</span>(<span class="at">x =</span> biden_term, <span class="at">y =</span> abs_rel_rev_pct)) <span class="sc">+</span></span>
<span id="cb68-742"><a href="#cb68-742"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb68-743"><a href="#cb68-743"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-744"><a href="#cb68-744"></a>    <span class="at">title =</span> <span class="st">"Absolute CES Revisions as % of Employment Level"</span>,</span>
<span id="cb68-745"><a href="#cb68-745"></a>    <span class="at">x =</span> <span class="st">"Term"</span>,</span>
<span id="cb68-746"><a href="#cb68-746"></a>    <span class="at">y =</span> <span class="st">"|Revision| as % of level"</span></span>
<span id="cb68-747"><a href="#cb68-747"></a>  )</span>
<span id="cb68-748"><a href="#cb68-748"></a><span class="in">```</span></span>
<span id="cb68-749"><a href="#cb68-749"></a></span>
<span id="cb68-750"><a href="#cb68-750"></a>In the CES data, average revisions during the Biden term are about 21,000 jobs compared with 10,600 for all other presidents, and the average absolute revision is 73,600 vs 55,300 jobs. However, when we formally compare Biden months to all other months, a t-test on revisions finds an estimated difference of 10.7 thousand jobs with p ≈ 0.53 and a 95% confidence interval of <span class="co">[</span><span class="ot">−22.8k, 44.2k</span><span class="co">]</span>, while a t-test on absolute percent revisions gives an almost zero difference (0.0004 percentage points, p ≈ 0.96). A proportion test for the share of negative revisions (47.9% under Biden vs 42.0% otherwise, p ≈ 0.52) also shows no statistically clear difference.</span>
<span id="cb68-751"><a href="#cb68-751"></a></span>
<span id="cb68-752"><a href="#cb68-752"></a>The boxplots by president and by term confirm that Biden-era revisions fall well within the historical range and are similar in size relative to the overall level of employment. These results do not support the idea that the administration “padded” the data with hundreds of thousands of nonexistent jobs. On a Politifact-style scale, this claim would be rated False (very close to “Pants on Fire”).</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>